![avatar](../../images/openGauss.png)

版权所有 © 2022  openGauss社区
 您对“本文档”的复制、使用、修改及分发受知识共享(Creative Commons)署名—相同方式共享4.0国际公共许可协议(以下简称“CC BY-SA 4.0”)的约束。为了方便用户理解，您可以通过访问https://creativecommons.org/licenses/by-sa/4.0/ 了解CC BY-SA 4.0的概要 (但不是替代)。CC BY-SA 4.0的完整协议内容您可以访问如下网址获取：https://creativecommons.org/licenses/by-sa/4.0/legalcode。

修订记录

| 日期      | 修订   版本 | 修改描述           | 作者       |
| --------- | ----------- | ------------------ | ---------- |
| 2022.9.29 | 1.0         | 可靠性测试报告初稿 | peilinqian |

 关键词： 故障注入，故障恢复

 

摘要：本报告基于对openGauss 3.1.0 Preview版本进行可靠性测试描述openGauss的可靠性测试情况，可靠性测试设计结合故障模式库，从用户使用角度分析openGauss功能场景，对每个功能场景分析其依赖的OS配置、软件资源、硬件资源进行可靠性故障注入测试，并关注故障注入后对数据库影响以及恢复故障后数据库是否可恢复正常。根据测试情况评估openGauss可靠性质量，识别可靠性关键风险。

 

缩略语清单：

| 缩略语 | 英文全名 | 中文解释 |
| ------ | -------- | -------- |
| NA     |          |          |

# 1     特性概述

本报告是面向开源的openGauss 3.1.0 Preview版本可靠性测试报告，报告主要包括openGauss 3.1.0 Preview版本可靠性测试情况，对可靠性测试工作进行总结，结合可靠性问题解决情况，为openGauss 3.1.0 Preview版本开源提供依据。

# 2     特性测试信息

本节描述被测对象的版本信息和测试的时间及测试轮次，包括依赖的硬件。

| 版本名称                     | 测试起始时间 | 测试结束时间 |
| ---------------------------- | ------------ | ------------ |
| openGauss 3.1.0 Preview RC3  | 2022/6/9     | 2022/6/15    |
| openGauss 3.1.0 Preview RC5  | 2022/6/21    | 2022/6/25    |
| openGauss 3.1.0 Preview RC7  | 2022/8/12    | 2022/8/19    |
| openGauss 3.1.0 Preview RC9  | 2022/8/25    | 2022/8/30    |
| openGauss 3.1.0 Preview RC11 | 2022/9/7     | 2022/9/13    |
| openGauss 3.1.0 Preview RC13 | 2022/9/21    | 2022/9/27    |

测试虚拟机信息

| 类型 | cpu  | 内存 | 磁盘 | 操作系统                             | 组网方式 |
| ---- | ---- | ---- | ---- | ------------------------------------ | -------- |
| x86  | 16   | 62G  | 130G | CentOS Linux release 7.6.1810 (Core) | 1主2备   |
| x86  | 8    | 16G  | 100G | openEuler release 20.03 (LTS)        | 1主2备   |

# 3     测试结论概述

## 3.1   测试整体结论

openGauss 3.1.0 Preview版本提供调用栈和日志记录的故障定位手段，故障引起进程Panic清理故障后可手动恢复进程运行；故障恢复后进程能正常运行、主备状态正常、能正常处理SQL、主备数据同步且数据一致；本次测试发现gs_probackup restore恢复的实例无法正常stop，但是可以通过规避措施解决，基本满足可靠可用。

openGauss 3.1.0 Preview版本可靠性测试共计测试6个版本，在x86+Centos，x86openEuler环境下共计执行692个用例，测试用例累计执行率100%，测试发现2个问题，其中1个问题CCB裁决非问题已取消，需修改测试用例，1个问题遗留处理。

## 3.2   约束说明

无

## 3.3   遗留问题分析

### 3.3.1 遗留问题影响以及规避措施

| 问题单号                                                     | 问题描述                                                     | 问题级别 | 问题影响和规避措施                                           | 当前状态 |
| ------------------------------------------------------------ | ------------------------------------------------------------ | -------- | ------------------------------------------------------------ | -------- |
| [I5KS0Y](https://e.gitee.com/opengaussorg/issues/table?issue=I5KS0Y) | gs_probackup restore恢复的tmpdn1使用gs_ctl start后gs_ctl stop失败 | 次要     | 备份后的实例启动后没有办法正常stop。可以指定-immediate 立即停止或者kill强制停止 | 待办的   |

### 3.3.2 问题统计

|        | 问题总数 | 严重 | 主要 | 次要 | 不重要 |
| ------ | -------- | ---- | ---- | ---- | ------ |
| 数目   | 2        | 0    | 0    | 2    | 0      |
| 百分比 | 100%     | 0%   | 0%   | 100% | 0%     |

### 3.3.3 问题单汇总

| 序号 | issue号                                                      | 问题级别 | 问题简述                                                     | 问题状态 |
| ---- | ------------------------------------------------------------ | -------- | ------------------------------------------------------------ | -------- |
| 1    | [I5DZTN](https://e.gitee.com/opengaussorg/issues/table?issue=I5DZTN) | 次要     | recovery_min_apply_delay设置为1，备1降为级联备，多次连跑tpcc，第18次连跑结束查询tpcc表数据时报错；经CCB同意非问题关闭。 | 已取消   |
| 2    | [I5KS0Y](https://e.gitee.com/opengaussorg/issues/table?issue=I5KS0Y) | 次要     | gs_probackup restore恢复的tmpdn1使用gs_ctl start后gs_ctl stop失败。 | 待办的   |





# 4     测试执行

## 4.1   测试执行统计数据

| 版本名称                     | 测试用例数 | 用例执行结果              | 发现问题单数 |
| ---------------------------- | ---------- | ------------------------- | ------------ |
| openGauss 3.1.0 Preview RC3  | 675        | Passed：674<br/>Failed：1 | 1            |
| openGauss 3.1.0 Preview RC5  | 686        | Passed：686<br/>Failed：1 | 0            |
| openGauss 3.1.0 Preview RC7  | 692        | Passed：690<br/>Failed：2 | 1            |
| openGauss 3.1.0 Preview RC9  | 692        | Passed：690<br/>Failed：2 | 0            |
| openGauss 3.1.0 Preview RC11 | 692        | Passed：690<br/>Failed：2 | 0            |
| openGauss 3.1.0 Preview RC13 | 692        | Passed：690<br/>Failed：2 | 0            |

**数据项说明：**

测试用例数：到本测试活动结束时，所有可用测试用例数；

发现问题单数：本测试活动总共发现的问题单数；

用例执行结果：失败用例的问题单与前一阶段发现问题单关联。

## 4.2   后续测试建议

后续测试需要关注点(可选)

# 5     附件

无