![avatar](../../../images/openGauss.png)

版权所有 © 2022  openGauss社区
 您对“本文档”的复制、使用、修改及分发受知识共享(Creative Commons)署名—相同方式共享4.0国际公共许可协议(以下简称“CC BY-SA 4.0”)的约束。为了方便用户理解，您可以通过访问https://creativecommons.org/licenses/by-sa/4.0/ 了解CC BY-SA 4.0的概要 (但不是替代)。CC BY-SA 4.0的完整协议内容您可以访问如下网址获取：https://creativecommons.org/licenses/by-sa/4.0/legalcode。

修订记录

|   日期    | 修订版本 |               修改描述               |      作者       |
| :------- | :------ | :---------------------------------- | :------------- |
| 2023-12-27 |   1.0    |           特性测试报告初稿           | zou_jialiang050 |

 关键词： 关键字降级

摘要：

本文对关键字降级后作为数据库中表、列、索引、角色、序列、表空间、外部数据源、用户、用户组、函数、存储过程、数据库、触发器、视图等对象名称及降级后替换语法进行测试，并给出最终测试结论。

缩略语清单：

| 缩略语 |                       英文全名                        | 中文解释                                             |
| :---- | :--------------------------------------------------- | :---------------------------------------------------- |
|  NA  |          |          |

# 1     特性概述

将ANY、CAST、LAST_DAY、ONLY、SYSDATE降级为非保留（不能是函数或类型）关键字，BODY、DO、END、LESS、MODIFY、NOTNULL、USER、VERBOSE、REJECT、RECYCLEBIN、FREEZE、COLLATION降级为一般非保留关键字。ANALYSE、BUCKETS、EXCLUDED、MINUS、ROWNUM、COMPACT关键字移除。

# 2     特性测试信息

| 版本名称                      | 测试起始时间 | 测试结束时间 |
| :---------------------------- | :----------- | :----------- |
| openGauss5.1.1 build 01b191f0 | 2023-12-8    | 2023-12-27   |

| 环境信息 | 配置信息                                                     | 备注 |
| :------- | :----------------------------------------------------------- | :---- |
| 虚拟机   | CPU：Intel(R) Xeon(R) Gold 6278C CPU @ 2.60GHz 8核<br />内存：32GB<br />硬盘：100G<br />OS：CentOS Linux release 7.6.1908 (Core) |      |

# 3     测试结论概述

## 3.1   测试整体结论

关键字降级特性测试中，共计执行用例454个，主要涉及关键字降级后作为数据库中表、列、索引、角色、序列、表空间、外部数据源、用户、用户组、函数、存储过程、数据库、触发器、视图等对象名称及降级后替换语法进行测试，未发现问题，无遗留风险，整体质量良好。

| 测试活动 | 活动评价                                                     |
| :------ | :----------------------------------------------------------- |
| 功能测试 | 关键字降级后作为数据库中表、函数、存储过程、数据库、触发器、视图等对象名称及降级后替换语法测试，通过 |
| 文档测试 | 文档描述正确，通过 |

## 3.2   约束说明

- 本次关键字降级作用域为兼容B库，需要在兼容b库下执行

## 3.3   遗留问题分析

### 3.3.1 遗留问题影响以及规避措施

| 问题单号 | 问题描述 | 问题级别 | 问题影响和规避措施 | 当前状态 |
| :------ | :------ | :------ | :---------------- | :------ |
|    NA    |  |          |  |  |

### 3.3.2 问题统计

|             | 问题总数 | 严重 | 主要 | 次要 | 不重要 |
| :--------- | :------ | :-- | :-- | :-- | :---- |
|  数目 (个)  |    0    |  0  |  0  |  0  |   0    |
| 百分比  (%) |   100   |  0  |  0   |  0  |   0    |

### 3.3.3 问题单汇总

| 序号 |                           issue号                            | 问题级别 |                           问题简述                           | 问题状态 |
| :-- | :---------------------------------------------------------- | :------ | :---------------------------------------------------------- | :------ |
|  NA  |  |  |  |          |

# 4    测试执行

## 4.1   功能测试

| 测试步骤                                                     | 测试结果                           |
| :------------------------------------------------------------ | :---------------------------------- |
| 1.验证关键字降级后作为数据库中表、列、索引、角色、序列、表空间、外部数据源、用户、用户组、函数、存储过程、数据库、触发器、视图等对象名称及降级后替换语法测试，通过 | 共执行测试用例454条<br />未发现bug。 |

## 4.2   测试执行统计数据

| 测试步骤                                 | 测试结果    |
| ---------------------------------------- | ----------- |
| 1.验证语法及函数资料描述及示例是否正确。 | 未发现bug。 |

## 4.3   测试执行统计数据

| 版本名称                      | 测试用例数 | 用例执行结果            | 发现问题单数 |
| :----------------------------- | :---------- | :----------------------- | :------------ |
| openGauss5.1.0 build 01b191f0 | 454 | Passed:454<br />Failed:0 | 0       |

缺陷单共0个，修改代码量为3.645kloc， 缺陷密度为0个/kloc

## 4.4   后续测试建议

无

# 5     附件

## 5.1 源代码及文档PR

支持部分关键字转为非保留字源代码修改PR：

https://gitee.com/opengauss/openGauss-server/pulls/4486

https://gitee.com/opengauss/Plugin/pulls/1126

支持部分关键字转为非保留字文档修改PR：

https://gitee.com/opengauss/docs/pulls/5995

## 5.2 示例

```sql
gs_testdb=# create table minus(minus int);
CREATE TABLE
gs_testdb=# create view minus as select * from minus;
CREATE VIEW
```
