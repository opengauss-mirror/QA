![avatar](../../images/openGauss.png)

版权所有 © 2024  openGauss社区
 您对“本文档”的复制、使用、修改及分发受知识共享(Creative Commons)署名—相同方式共享4.0国际公共许可协议(以下简称“CC BY-SA 4.0”)的约束。为了方便用户理解，您可以通过访问[*https://creativecommons.org/licenses/by-sa/4.0/*](https://creativecommons.org/licenses/by-sa/4.0/) 了解CC BY-SA 4.0的概要 (但不是替代)。CC BY-SA 4.0的完整协议内容您可以访问如下网址获取：[*https://creativecommons.org/licenses/by-sa/4.0/legalcode*](https://creativecommons.org/licenses/by-sa/4.0/legalcode)。

修订记录

| 日期     | 修订版本 | 修改章节 | 修改描述 | 作者 |
| -------- | -------- | -------- | -------- | ---- |
| 2024.9.6 | V1.0     | 初稿撰写 |          | 宋菲 |

目 录

1 概述

2 测试版本说明

3 版本概要测试结论

4 版本详细测试结论

> 4.1 特性测试结论

> 4.2 专项测试结论

5 问题单统计

6 附件

7 致谢

**Keywords 关键词**：openGauss 6.0.0 

**Abstract 摘要**：主要是描述了神通在openGauss 6.0.0版本的整体测试情况，给出本阶段的测试范围、结果、分析及质量评价，同时对测试活动进行回顾总结。

 

***


# 概述

神通在opengauss-6.0.0版本中共提交5个需求，自测4个需求，委托测试1个需求（I8BWSA）。另外神通使用自研语句模糊工具测试进行了测试；对一些基础功能，如系统函数、层次查询、分区表、逻辑复制等功能进行了测试。综合来看，神通提交并测试的需求整体质量良好。其他测试提交的问题也均得到解决。

# 测试版本说明

| 轮次         | 版本名称                 | 测试起始时间 | 测试结束时间 |
| ------------ | ------------------------ | ------------ | ------------ |
| Test round 1 | 内部发布版本             | 2024-3-26    | 2024-5-28    |
|              | openGauss 6.0.0 （B017） | 2024-5-29    | 2024-6-11    |
|              | openGauss 6.0.0 （B019） | 2024-6-12    | 2024-6-25    |
|              | openGauss 6.0.0 （B021） | 2024-6-26    | 2024-7-16    |
|              | openGauss 6.0.0 （B023） | 2024-7-17    | 2024-7-30    |
|              | openGauss 6.0.0 （B025） | 2024-7-31    | 2024-9-3     |
| Test round 2 | openGauss 6.0.0 （B030） | 2024-9-4     | 2024-9-10    |
|              | openGauss 6.0.0 （B031） | 2024-9-11    | 2024-9-12    |

本次测试的测试环境。

| 硬件型号                 | 硬件配置信息                                                 | 备注          |
| ------------------------ | ------------------------------------------------------------ | ------------- |
| TaiShan 200 (Model 2280) | CPU：Kunpeng-920 7260 4核<br />内存：16G<br />硬盘：128G<br />OS：Kylin Linux Advanced Server V10 SP2<br />文件系统：EXT4<br />网卡：千兆 | KVM虚拟化平台 |
| TaiShan 200 (Model 2280) | CPU：Kunpeng-920 7260 8核<br />内存：16G<br />硬盘：128G<br />OS：Kylin Linux Advanced Server V10 SP2<br />文件系统：XFS<br />网卡：千兆 | KVM虚拟化平台 |



openGauss 6.0.0版本发布的，由神通负责的需求列表如下：

| 序号 | 需求                                                  | 开发主体   | 测试主体 | 验证策略                                                     |
| ---- | ----------------------------------------------------- | ---------- | -------- | ------------------------------------------------------------ |
| 1    | 【openGauss 6.0.0】【兼容性】去除LargeObject 使用限制 | SQL ENGine | QA       | 验证大对象类型可读写，读写不超过范围<br/>                    |
| 2    | 【openGauss 6.0.0】【兼容性】支持array和record嵌套    | SQL ENGine | QA       | 验证array嵌套array时，赋值、取值、插入表数、打印输出正常，异常情况报错清晰 |
| 3    | 【openGauss 6.0.0】【兼容性】支持游标参数默认值       | SQL ENGine | QA       | 验证游标默认值生效，异常情况报错清晰                         |
| 4    | 【openGauss 6.0.0】【兼容性】支持用ROWTYPE给游标赋值  | SQL ENGine | QA       | 验证游标可使用rowtype类型赋值、取值、插入表数据、打印输出，异常情况报错清晰 |
| 4    | 【openGauss 6.0.0】【兼容性】MySQL 8.0协议兼容【M】   | plugin sig | QA       | 验证支持caching_sha2_password认证方式<br/>验证兼容新老协议认证<br/>验证升级以及兼容数据交互协议<br/>验证支持SSL通信<br/>验证支持快速认证，缓存条目功能 |

# 版本概要测试结论

​        openGauss 6.0.0版本，神通共进行了两轮测试，已完成全部新需求的验证，问题均已验收。

阶段一：

1、针对神通提出的新需求，编写测试设计，编写测试用例，并对测试设计进行QA Sig组评审，测试用例进行内部评审。执行已评审通过的测试用例，提交问题。

2、使用了自研语句模糊工具对openGauss 进行了适配，并对openGauss 6.0.0 的B017至B025版本，进行了模糊测试。

3、使用神通自有SQL测试用例对openGauss 进行了测试，用例主要涉及系统函数、层次查询、分区表、DML、DDL等。测试出的问题已提交，完整测试用例无法开源，问题描述中的用例可开源。

4、在神通自有SQL测试用例的基础上，对gs_dump、gs_restore进行了测试。测试出的问题已提交，完整测试用例无法开源，问题描述中的用例可开源。



阶段二：验收已修正的问题，编写测试报告并进行评审。



​        openGauss 6.0.0版本中，神通共发现问题26个，有效问题24个。修复问题回归测试结果正常，版本整体质量良好。无遗留问题。

# 版本详细测试结论

## 特性测试结论

### 继承特性评价

无

### 新需求评价

| 特性名称                                              | 测试情况说明                                                 | 约束                                                         | 质量电灯                   | 遗留问题 |
| ----------------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | -------------------------- | -------- |
| 【openGauss 6.0.0】【兼容性】去除LargeObject 使用限制 | opengauss解除大对象使用限制，共计执行85个用例，支持了大对象功能使用，完成了性能测试，完成了接口测试，完成了兼容性测试，完成了可靠性测试。功能问题1个，资料问题4个，问题均已解决，回归验收通过，无遗留风险，整体质量良好； | 限制只有超级用户才能使用lo_import和lo_export                 | <font color=green>▮</font> | 无       |
| 【openGauss 6.0.0】【兼容性】支持array和record嵌套    | 本需求在测试阶段完成了功能测试、可靠性测试、可服务性测试、资料测试、特性耦合分析测试。共执行26个测试用例，发现功能问题2个，问题均已解决，回归验收通过，无遗留风险，整体质量良好； | 在A库之外或在分布式数据库或匿名块中，不允许声明array的元素类型为record，也不允许record和record嵌套。 嵌套深度上限为6。 record类型成员不允许为嵌套array类型。 不支持向嵌套数组的一维数组赋值。 | <font color=green>▮</font> | 无       |
| 【openGauss 6.0.0】【兼容性】支持游标参数默认值       | 本需求在测试阶段完成了功能测试、性能测试、可靠性、可测试性测试、可服务性测试，共计执行96个用例。未发现功能问题和资料问题，无遗留风险，整体质量良好； | 需要按顺序先声明没有默认值的参数，再声明有默认值的参数。先于最后一个无默认值的参数声明的参数的默认值无效。例如在如下所示的例子中，游标c的参数arg1的默认值无效，只有arg3的默认值会生效。 | <font color=green>▮</font> | 无       |
| 【openGauss 6.0.0】【兼容性】支持用ROWTYPE给游标赋值  | 本需求在测试阶段完成了功能测试、可靠性测试、可服务性测试、资料测试、特性耦合分析测试。共执行49个测试用例，发现功能问题8个，无资料问题，问题均已解决，回归验收通过，无遗留风险，整体质量良好； | %ROWTYPE不支持引用复合类型或RECORD类型变量的类型、跨PACKAGE cursor的类型。 PL对象受预编译参数控制，例如 **set** behavior_compat_options='allow_procedure_compile_check';  开启预编译开关时可以检测游标所涉及的表是否存在、表中是否存在对应列，能够在创建函数、存储过程、包时抛出错误。 关闭预编译开关时无论游标所涉及的表、或者表中的列是否存在，都可以成功创建函数、存储过程、包。 目前未考虑在PL执行过程中修改表的情况，将在后续提出其他需求进一步完善。 嵌套游标不支持使用%ROWTYPE。 | <font color=green>▮</font> | 无       |
| 【openGauss 6.0.0】【兼容性】MySQL 8.0协议兼容【M】   | 本需求在测试阶段完成了兼容性测试。共执行73个测试用例，发现功能问题2个，问题均已解决，无遗留风险，整体质量良好； | 无                                                           | <font color=green>▮</font> | 无       |

<font color=red>●</font>： 表示特性不稳定，风险高

<font color=yellow>▲</font>： 表示特性基本可用，遗留少量问题

<font color=green>▮</font>： 表示特性质量良好

## 专项测试结论

### 安全测试

openGauss 6.0.0版本安全测试覆盖：

1、通过神通自研语句模糊测试工具RandomTest，生成随机的无实际意义的SQL语句，如delete ABS();，进行模糊测试。

openGauss 6.0.0版本B017-B-25版本均已执行，未发现问题，整体质量良好，风险可控。

### 可靠性测试

未进行针对性测试。

### 性能测试

未进行针对性测试。

### 兼容性测试

#### 升级兼容

未进行针对性测试。

#### 硬件兼容

未进行针对性测试。

#### 软件兼容

未进行针对性测试。

### 资料测试

随新需求验证，验证通过。文档描述详细，无错字，约束完善，用例可执行。

# 问题单统计

openGauss 6.0.0版本，神通共发现问题26个，有效问题24个，无效问题2个。修复问题回归测试结果正常，版本整体质量良好。无遗留问题。



| 轮次         | 版本名称                 | 测试起始时间 | 测试结束时间 | 有效问题 | 无效问题数量 |
| ------------ | ------------------------ | ------------ | ------------ | -------- | ------------ |
| Test round 1 | 内部发布版本             | 2024-3-26    | 2024-5-28    | 0        | 0            |
|              | openGauss 6.0.0 （B017） | 2024-5-29    | 2024-6-11    | 0        | 0            |
|              | openGauss 6.0.0 （B019） | 2024-6-12    | 2024-6-25    | 0        | 0            |
|              | openGauss 6.0.0 （B021） | 2024-6-26    | 2024-7-16    | 9        | 1            |
|              | openGauss 6.0.0 （B023） | 2024-7-17    | 2024-7-30    | 2        | 0            |
|              | openGauss 6.0.0 （B025） | 2024-7-31    | 2024-9-3     | 15       | 1            |
| Test round 2 | openGauss 6.0.0 （B030） | 2024-9-4     | 2024-9-10    | 0        | 0            |
|              | openGauss 6.0.0 （B031） | 2024-9-11    | 2024-9-12    | 0        | 0            |

# 附件

## 附件1：遗留问题列表

无遗留问题。

# 致谢

感谢参与撰写本文、或在过程中给出宝贵指导意见的各位社区开发者（排名不分先后）

+ [@justbk](https://gitee.com/justbk)
+ [@wan005](https://gitee.com/wan005)
+ [@peilinqian](https://gitee.com/peilinqian)
+ [@liu-tong-8848](https://gitee.com/liu-tong-8848)
+ [@li-xin12345](https://gitee.com/@li-xin12345)
