![avatar](../../../images/openGauss.png)

版权所有 © 2023  openGauss社区
您对“本文档”的复制、使用、修改及分发受知识共享(Creative Commons)署名—相同方式共享4.0国际公共许可协议(以下简称“CC BY-SA 4.0”)的约束。为了方便用户理解，您可以通过访问https://creativecommons.org/licenses/by-sa/4.0/ 了解CC BY-SA 4.0的概要 (但不是替代)。CC BY-SA 4.0的完整协议内容您可以访问如下网址获取：https://creativecommons.org/licenses/by-sa/4.0/legalcode。

修订记录

| 日期       | 修订   版本 | 修改描述             | 作者       |
| ---------- | ----------- | -------------------- | ---------- |
| 2024-02-27 | 1.0         | 特性测试报告初稿完成 | lichunlong |

 关键词： 

 CM、pause、resume

摘要：

 本文档主要介绍CM pause执行资源池化，并给出最终测试结论。

缩略语清单：

| 缩略语 | 英文全名        | 中文解释           |
| ------ | --------------- | ------------------ |
| CM     | Cluster Manager | 统一数据库管理工具 |

# 1     特性概述

CM pause支持资源池化，执行cm_ctl pause暂停命令后，可以将CM对DN的自动仲裁和故障处理功能暂停掉，避免运维操作被干扰，运维操作完成后，再执行cm_ctl resume恢复操作，可以重新恢复CM的仲裁和故障处理功能。

# 2     特性测试信息

本节描述被测对象的版本信息和测试的时间及测试轮次，包括依赖的硬件。

| 版本名称                       | 测试起始时间 | 测试结束时间 |
| ------------------------------ | ------------ | ------------ |
| openGauss 6.0.0 build b8fc2278 | 2024-02-8    | 2024-02-26   |

描述特性测试的硬件环境信息

| 环境信息      | 配置信息                                                     | 备注 |
| ------------- | ------------------------------------------------------------ | ---- |
| ARM+openEuler | CPU：Kunpeng 920 7260 2p 128核<br />内存：24*32GB<br />硬盘：NVME 3T * 4<br />OS：openEuler release 20.03 (LTS)<br />文件系统：XFS<br />网卡：10GE |      |

# 3     测试结论概述

## 3.1   测试整体结论

支持一键式关闭CM集群服务，共计执行49条用例，主要覆盖了功能测试、可靠性和资料测试。功能测试覆盖对CM集群执行暂停和恢复后CM的功能。可靠性测试覆盖在暂停后磁盘、网络、集群双主等异常时，CM的功能是否可用。资料测试覆盖校验资料的描述是否完整无误。测试过程中未发现问题单,整体质量良好。

| 测试活动   | 活动评价                                                     |
| ---------- | ------------------------------------------------------------ |
| 接口测试   | cm_ctl pause暂停之后数据库功能正常、仲裁功能停止，暂停期间执行各种cm命令、或者对dn、dss以及cm进程进行故障操作，cm_ctl resume之后集群能够恢复到对数据库检测及仲裁，测试通过。 |
| 可靠性测试 | 网络，磁盘等故障场景下CM功能正常，通过                       |
| 专项测试   | 资料对于新增加的功能描述准确，示例的执行结果正确，整体质量良好 |

## 3.2   约束说明

1. 集群各节点间的互信网络正常。

2. 暂停操作和扩缩容操作不能同时进行，否则会出现扩缩容失败。
3. 在执行cm_ctl pause命令前，需要先挺掉业务，防止此时出现故障导致业务异常。

## 3.3   遗留问题分析

### 3.3.1 遗留问题影响以及规避措施

| 问题单号 | 问题描述 | 问题级别 | 问题影响和规避措施 | 当前状态 |
| -------- | -------- | -------- | ------------------ | -------- |
| NA       |          |          |                    |          |

### 3.3.2 问题统计

|        | 问题总数 | 严重 | 主要 | 次要 | 不重要 |
| ------ | -------- | ---- | ---- | ---- | ------ |
| 数目   | 0        | 0    | 0    | 0    | 0      |
| 百分比 | 100      | 0    | 0    | 0    | 0      |

# 4     测试执行

## 4.1   测试执行统计数据

*本节内容根据测试用例及实际执行情况进行特性整体测试的统计，可根据第二章的测试轮次分开进行统计说明。*

| 版本名称                       | 测试用例数 | 用例执行结果       | 发现问题单数 |
| ------------------------------ | ---------- | ------------------ | ------------ |
| openGauss 6.0.0 build b8fc2278 | 49         | Passed:49 Failed:0 | 0            |

数据项说明：

- 用例执行结果：执行全量用例49各，全部通过。
- 缺陷密度为0(缺陷个数)/0.131k(代码行数)=0(个/kloc)。

## 4.2   后续测试建议

无

# 5     附件

无

 



 

 
