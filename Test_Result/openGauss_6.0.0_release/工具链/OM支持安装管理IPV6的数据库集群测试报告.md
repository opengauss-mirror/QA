![avatar](../../images/openGauss.png)

版权所有 © 2024  openGauss社区
 您对“本文档”的复制、使用、修改及分发受知识共享(Creative Commons)署名—相同方式共享4.0国际公共许可协议(以下简称“CC BY-SA 4.0”)的约束。为了方便用户理解，您可以通过访问[*https://creativecommons.org/licenses/by-sa/4.0/*](https://creativecommons.org/licenses/by-sa/4.0/) 了解CC BY-SA 4.0的概要 (但不是替代)。CC BY-SA 4.0的完整协议内容您可以访问如下网址获取：[*https://creativecommons.org/licenses/by-sa/4.0/legalcode*](https://creativecommons.org/licenses/by-sa/4.0/legalcode)。

修订记录

| 日期       | 修订版本 | 修改描述 | 作者   |
| ---------- | -------- | -------- | ------ |
| 2024.09.19 | 1.0      |          | 姚雨驰 |

[TOC]

**Keywords 关键词**：*XX*

**Abstract 摘要**：*给出本阶段的测试范围、结果、分析及质量评价，同时对测试活动进行回顾总结。*

**缩略语清单： **

| 缩略语 | 英文全名 | 中文解释 |
| ------ | -------- | -------- |
|        |          |          |


# 1 概述

6.0.0版本OM支持安装管理IPV6的数据库集群

# 2 测试版本说明

*本章节描述测试版本的基本信息*，*包括测试对象是什么，以及在什么环境下开展的测试，具体包括被测版本、周边配套版本、平台版本和测试环境*。

*描述被测对象的版本信息和测试的时间及测试轮次*。

## 2.1 测试版本信息

###   2.1.1 被测版本

*本节描述每轮被测对象的版本信息（若使用了补丁，补丁版本号不能遗漏)；描述测试的时间、地点和测试人员。建议使用以下表格说明，可自行增减表中字段*

| 版本名称            | 软件包名称                                | 测试起始时间 | 测试结束时间 | 测试人员 |
| ------------------- | ----------------------------------------- | ------------ | ------------ | -------- |
| openGauss-6.0.0B027 | openGauss-All-6.0.0-CentOS7-x86_64.tar.gz | 2024.08.15   | 2024.08.29   | 姚雨驰   |
| openGauss-6.0.0B028 | openGauss-All-6.0.0-CentOS7-x86_64.tar.gz | 2024.08.15   | 2024.08.29   | 姚雨驰   |
| openGauss-6.0.0B029 | openGauss-All-6.0.0-CentOS7-x86_64.tar.gz | 2024.08.15   | 2024.08.29   | 姚雨驰   |

###  2.1.2 配套测试的版本

无

## 2.2 测试环境描述

*描述本次测试的测试环境（包括记录所使用工具、环境软硬件版本信息，环境组网配置信息， 测试仪器及辅助设备等）*。

*记录所使用的测试工具中的软件和单板硬件版本信息。*

*记录使用到的测试仪器及辅助设备，说明其型号和规格。记录环境组网配置信息。*

*建议使用以下表格说明，可自行增减表中字段*

###  2.2.1 环境硬件信息

| 环境信息                                         | 硬件型号          | 硬件配置信息                                                 | 备注 |
| ------------------------------------------------ | ----------------- | ------------------------------------------------------------ | ---- |
| 192.168.0.82<br />192.168.0.167<br />192.168.0.3 | centOS x86        | CPU：Intel(R) Xeon(R) Platinum 8378A CPU @ 3.00GHz<br />内存：15G<br />硬盘：100G<br />OS：CentOS Linux release 7.6.1810 (Core)<br />文件系统：XX<br />网卡：ipv6 |      |
| 20.20.20.115<br />20.20.20.117                   | openEuler aarch64 | CPU：Kunpeng-920<br />内存：765Gi<br />硬盘：2.9T<br />OS：openEuler release 20.03 (LTS) |      |



# 3 版本概要测试结论、关键风险和规避措施

*本章概要性给出版本测试结论、风险和规避措施。*

## 3.1 测试结论总结

6.0.0版本需求完成功能测试、资料测试，需求功能实现，累计执行用例54个，用例执行率96.5%，上述测试发现问题9个，9个已验收，开发质量良好

## 3.2 约束说明

目标机器需要支持ipv6通信，能够使用ssh+ipv6地址连接

## 3.3 关键风险和规避措施

无

# 4 版本详细测试结论

*本章节针对总体测试策略计划的测试内容，给出详细的测试结论。*

## 4.1 特性测试结论

###   4.1.1 新需求质量评价

*建议以表格的形式汇总本阶段新特性的商用化建议（此章节除了考虑可靠性、性能、开源等风险评估之外，还需考虑基础特性安全与隐私风险），如下表格所示。*

*下表仅供参考，不作为强制输出方式。*

| 特性                               | 特性价值评估 | 应用说明及关键约束假设依赖 | 关键遗留事项如缺陷等 | 测试整体覆盖情况            | 特性质量评估               | 主要风险 |
| ---------------------------------- | ------------ | -------------------------- | -------------------- | --------------------------- | -------------------------- | -------- |
| **OM支持安装管理IPV6的数据库集群** | 满足         | 机器支持ipv6通信           | 无                   | 功能测试，及yat连跑工具用例 | <font color=green>▮</font> | 无       |

## 4.2 产品质量属性目标(DFX)测试结论

###  4.2.1 性能测试结论

无

###  4.2.2 可靠性测试结论

无

###  4.2.3 安全&隐私保护测试结论

无

### 4.2.4 可服务性测试结论

无

### 4.2.5 生命周期管理测试结论

无

### 4.2.6 韧性测试结论

无

###  4.2.7 兼容性测试结论

无

###  4.2.8 升级测试结论

*按照测试策略中制定的升级路径及具体版本号（包括补丁），给出验证结论。（如本测试阶段涉及则填写）*

| 测试步骤               | 升级路径              | 测试结论 |
| ---------------------- | --------------------- | -------- |
| 数据库升级，回滚，提交 | 6.0.0B028-》6.0.0B029 | 测试通过 |

## 4.3 资料测试结论

*按照总体测试策略中制定的兼资料测试策略，给出验证结论。（如本测试阶段涉及则填写）*

*如下表格所示。下表仅供参考，不作为强制输出方式*

| 序号 | 测试章节                                               | 测试结论                         |
| ---- | ------------------------------------------------------ | -------------------------------- |
|      | *content/zh/docs/InstallationGuide/创建XML配置文件.md* | *整体质量良好，发现问题均已解决* |

# 5 测试对象质量评估

*本章节对被测对象的质量进行评估，主要从需求覆盖、场景覆盖等情况和缺陷发现的情况进行分析，目的是审视被测试的充分性和完备性，以说明上述测试结论的可信。*

##  5.1 覆盖率分析

本次测试覆盖ipv6数据库安装、卸载、升级、多种驱动连接数据库及各数据库工具的使用，这些对象查询结果验证功能与需求相符，异常情况有合理报错。

##  5.2 缺陷统计和分析

###   5.2.1 缺陷统计

|        | 问题总数 | 严重 | 主要 | 次要 | 不重要 |
| ------ | -------- | ---- | ---- | ---- | ------ |
| 数目   | 9        | 0    | 0    | 9    | 0      |
| 百分比 | 100%     | 0    | 0    | 100% | 0      |

###   5.2.2 缺陷列表

| 问题单号                                                     | 问题描述                                                     | 问题级别 | 当前状态 |
| ------------------------------------------------------------ | ------------------------------------------------------------ | -------- | -------- |
| [IAQMMZ](https://e.gitee.com/opengaussorg/issues/list?issue=IAQMMZ) | 【测试类型：工具功能】【测试版本：6.0.0B031】ipv6数据库升级失败 | 次要     | 已验收   |
| [IAPC7F](https://e.gitee.com/opengaussorg/issues/list?issue=IAPC7F) | 【测试类型：工具功能】【测试版本：6.0.0B030】ipv6安装一主一备数据库，备机使用完整ip，预安装失败 | 次要     | 已验收   |
| [IAM0QI](https://e.gitee.com/opengaussorg/issues/list?issue=IAM0QI) | 【测试类型：工具功能】【测试版本：6.0.0B028】ifconfig中配置的ipv6地址为可压缩的完整格式，xml文件中使用完整格式ipv6，卸载数据库失败 | 次要     | 已验收   |
| [IALICP](https://e.gitee.com/opengaussorg/issues/list?issue=IALICP) | 【测试类型：工具功能】【测试版本：6.0.0】配置数据库xml，cluster中使用ipv4地址，device中使用ipv6地址，安装成功，期望报错 | 次要     | 已验收   |
| [IALFKL](https://e.gitee.com/opengaussorg/issues/list?issue=IALFKL) | 【测试类型：工具功能】【测试版本：6.0.0】ipv6地址安装一主一备数据库，主备切换后执行gs_om -t refreshconf失败 | 次要     | 已验收   |
| [IAL7VJ](https://e.gitee.com/opengaussorg/issues/list?issue=IAL7VJ) | 【测试类型：工具功能】【测试版本：6.0.0】ipv6数据库要扩容的节点已经安装了单机版的数据库，扩容报错 | 次要     | 已验收   |
| [IAKXSD](https://e.gitee.com/opengaussorg/issues/list?issue=IAKXSD) | 【测试类型：工具功能】【6.0.0】数据库使用ipv6安装后无法卸载  | 次要     | 已验收   |
| [IAKOYW](https://e.gitee.com/opengaussorg/issues/list?issue=IAKOYW) | 【测试类型：工具功能】【6.0.0B027】使用ipv6地址安装om单机数据库，执行安装失败 | 次要     | 已验收   |
| [IAKOA3](https://e.gitee.com/opengaussorg/issues/list?issue=IAKOA3) | 【测试类型：工具功能】【6.0.0B027】使用ipv6地址安装om数据库，root用户执行预安装，不分离环境变量时报错 | 次要     | 已验收   |

# 6 测试过程评估

*本章节对测试过程进行评估，包括测试策略、测试设计和测试执行，目的是审视测试过程的执行情况，分析有待进一步开展测试和需要改进的地方。*

##  6.1 测试策略回顾

*回顾本阶段的测试策略，建议以表格的方式检查测试策略规定的活动是否都已经落实。*

| 编号 | 特性     | 验证策略           | 是否按照测试策略执行 |
| ---- | -------- | ------------------ | -------------------- |
| 1    | 功能测试 | 功能测试与需求相符 | YES                  |

##  6.2 测试设计评估

*提供对本次测试活动的测试设计的评估。可结合测试设计评审建议；评审完成，测试过程中，发现的新增或删减的测试点进行说明。*

| 编号 | 测试点修改说明                                               | 修改原因    | 是否影响测试质量 |
| ---- | ------------------------------------------------------------ | ----------- | ---------------- |
|      | *测试设计评审通过后，在实际测试执行过程中，发现的新增或删减的测试点列举* | *增/删原因* | *是/否*          |
|      | 无                                                           |             |                  |
|      |                                                              |             |                  |

##  6.3 测试执行评估

*提供对本次测试活动的测试执行过程的评估结论。描述对测试执行活动的改进建议，以供后续测试执行活动中借鉴参考；*

*测试执行活动评估结论可依据以下提供的“测试执行统计数据”及“测试用例执行结果统计数据”进行分析而给出。*

###  6.3.1 测试执行统计数据

| 版本名称                                                     | 工作量投入(人天) | 测试用例数 | 用例执行数 | 发现缺陷数 | 代码量（KLOC） | 缺陷密度 |
| ------------------------------------------------------------ | ---------------- | ---------- | ---------- | ---------- | -------------- | -------- |
| openGauss6.0.0B027<br />openGauss6.0.0B028<br />openGauss6.0.0B029 | 14               | 54         | 54         | 9          | 0.551          | 16.3     |

*数据项说明：*

- *版本名称--每个转测版本名称，例如openGauss 6.0.0 B016*
- *工作量投入--与本活动相关的所有工作量投入，包括测试计划、方案、用例、脚本、执行等所有与本测试相关的活动所花的投入，单位“人天”；不包括以前已经统计的投入，不包括开局、用户支援等非测试相关投入；*
- *测试用例数--到本测试活动结束时，本测试活动中所有可用测试用例数；*
- *执行用例数--在本测试活动中执行测试用例数，含手工和自动化用例，多次重复执行同一用例计算为1个；*
- *发现缺陷数--本测试活动总共发现的缺陷数（不含无效问题单数）。*
- 代码量--pr中统计的实际代码量
- *缺陷密度--缺陷个数/代码行数*

###  6.3.2 测试用例执行结果统计数据

*对本次测试用例执行结果统计，其中的字段可根据实际情况进行设计和裁剪。对于Failed，Blocked，Unavailable的测试用例项不为0，须给出说明，并明确相应的后续计划（如：对于物料问题导致未执行用例，则需明确相应的物料计划；对于Blocked用例，需明确问题解决与相应版本的测试时间等）。对于最后一轮测试，要给出相应的规避措施。正文内容写明该需求共计多少用例*

|        | 计划测试用例数 | 实际测试的用例数 | Passed | Failed | Blocked | Unavailable | 执行率 | 执行通过率 |
| ------ | -------------- | ---------------- | ------ | ------ | ------- | ----------- | ------ | ---------- |
| 第一轮 | 54             | 54               | 47     | 2      | 5       | 0           | 100%   | 87%        |
| 第二轮 | 54             | 54               | 54     | 0      | 0       | 0           | 100%   | 100%       |



# 7 附件

##  7.1 附件1：遗留问题列表

无

##  7.2 附件2：特性相关PR

*提供本需求相关的代码pr及资料pr*

[om支持ipv6相关](https://e.gitee.com/opengaussorg/repos/opengauss/openGauss-OM/pulls/753)

[【回合6.0.0】安装部署openGauss时，各节点的ip类型不同时提示报错](https://e.gitee.com/opengaussorg/repos/opengauss/openGauss-OM/pulls/807)

[【6.0.0】回环地址::1启动openGauss](https://e.gitee.com/opengaussorg/repos/opengauss/openGauss-OM/pulls/856)

[【6.0.0】修复ipv6主备切换后执行gs_om -t refreshconf发送文件失败](https://e.gitee.com/opengaussorg/repos/opengauss/openGauss-OM/pulls/857)

[【6.0.0】ipv6部署数据库节点间发送文件失败](https://e.gitee.com/opengaussorg/repos/opengauss/openGauss-OM/pulls/858)

[【6.0.0】修复xml文件配置 完整的ipv6时 卸载失败问题](https://e.gitee.com/opengaussorg/repos/opengauss/openGauss-OM/pulls/861)

[【6.0.0】检验xml文件中cluster块的总ip地址，是否有效以及ip类型是否一致](https://e.gitee.com/opengaussorg/repos/opengauss/openGauss-OM/pulls/848)

[【6.0.0】数据库使用ipv6安装后无法卸载、root下预安装失败](https://e.gitee.com/opengaussorg/repos/opengauss/openGauss-OM/pulls/817)

[【回合6.0.0】CheckNetSpeed/kerbero/gs_sdr 使用报错](https://e.gitee.com/opengaussorg/repos/opengauss/openGauss-OM/pulls/796)

[gs_sdr -t start -X *.xml 建立流式容灾时脚本报错](https://e.gitee.com/opengaussorg/repos/opengauss/openGauss-OM/pulls/798)

[【6.0.0】gs_ssh失败找不到文件以及SSL连接报错](https://e.gitee.com/opengaussorg/repos/opengauss/openGauss-OM/pulls/873)

[【回合6.0.0】预安装SshTool.py执行checkos时ipv6发送临时文件失败](https://e.gitee.com/opengaussorg/repos/opengauss/openGauss-OM/pulls/879)

[【6.0.0】修复完整的ipv6地址多节点安装部署openGauss失败的问题](https://e.gitee.com/opengaussorg/repos/opengauss/openGauss-OM/pulls/895)

[【6.0.0】修复ipv6升级失败](https://e.gitee.com/opengaussorg/repos/opengauss/openGauss-OM/pulls/904)

[【回合6.0.0】om支持ipv6安装部署补充说明](https://e.gitee.com/opengaussorg/repos/opengauss/docs/pulls/6728)
