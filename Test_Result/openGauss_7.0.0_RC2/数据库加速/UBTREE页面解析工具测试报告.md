+ ![avatar](../../../images/openGauss.png)

  版权所有 © 2024  openGauss社区
   您对“本文档”的复制、使用、修改及分发受知识共享(Creative Commons)署名—相同方式共享4.0国际公共许可协议(以下简称“CC BY-SA 4.0”)的约束。为了方便用户理解，您可以通过访问[*https://creativecommons.org/licenses/by-sa/4.0/*](https://creativecommons.org/licenses/by-sa/4.0/) 了解CC BY-SA 4.0的概要 (但不是替代)。CC BY-SA 4.0的完整协议内容您可以访问如下网址获取：[*https://creativecommons.org/licenses/by-sa/4.0/legalcode*](https://creativecommons.org/licenses/by-sa/4.0/legalcode)。

  修订记录

  | 日期      | 修订版本 | 修改描述     | 作者  |
  | --------- | -------- | ------------ | ----- |
  | 2025.6.17 | v1.0     | 测试报告初稿 | lixin |

  **Keywords 关键词**：ubtree、pcr

  **Abstract 摘要**：主要测试pagehack工具支持ubtree索引页面解析，整体质量良好。

  **缩略语清单：**

  | 缩略语 | 英文全名 | 中文解释 |
  | ------ | -------- | -------- |
  | 无     |          |          |


  # 1 概述

  本报告主要测试pagehack支持UBTREE Meta、中间、叶子页面解析打印，页内数据校验，输出测试用例61个，执行测试共1轮，发现issue共5个，均已修复并回归通过，无遗留问题，整体质量良好。

  # 2 测试版本说明

  ## 2.1 测试版本信息

  ###   2.1.1 被测版本

  | 版本名称                 | 软件包名称 | 测试起始时间 | 测试结束时间 | 测试人员 |
  | ------------------------ | ---------- | ------------ | ------------ | -------- |
  | openGauss 7.0.0-RC2 B008 | openGauss  | 2025-5-27    | 2025-6-13    | lixin    |

  ###  2.1.2 配套测试的版本

  | 版本名称 | 配套版本 | 版本说明 |
  | -------- | -------- | -------- |
  | 无       |          |          |

  ## 2.2 测试环境描述

  ###  2.2.1 环境硬件信息

  | 环境信息 | 硬件配置信息                                                 | 备注 |
  | -------- | ------------------------------------------------------------ | ---- |
  | 物理机   | Kunpeng 920 320核<br/>内存：2TB<br/>硬盘：5.8TB<br/>OS：EulerOS release 2.0 (SP3) |      |

  # 3 版本概要测试结论、关键风险和规避措施

  本次特性主要测试pagehack支持UBTREE Meta、中间、叶子页面解析打印，页内数据校验，输出测试用例61个，执行测试共1轮，发现issue共6个，均已修复并回归通过，无遗留问题，整体质量良好。

  # 4 版本详细测试结论

  ## 4.1 特性测试结论

  ###   4.1.1 新需求质量评价

  | 特性               | 特性价值评估                                          | 应用说明及关键约束假设依赖 | 关键遗留事项如缺陷等 | 测试整体覆盖情况 | 特性质量评估               | 主要风险 |
  | ------------------ | ----------------------------------------------------- | -------------------------- | -------------------- | ---------------- | -------------------------- | -------- |
  | Ubtree页面解析工具 | 支持UBTREE Meta、中间、叶子页面解析打印，页内数据校验 | 无                         | 无                   | 100%             | <font color=green>▮</font> | 无       |

  *特性质量评估说明*：

  <font color=red><font color=red>●</font></font>： *表示特性不稳定，风险高*

  <font color=yellow><font color=yellow>▲</font></font>： *表示特性基本可用，遗留少量问题*

  <font color=green>▮</font>： *表示特性质量良好*

  ## 4.2 产品质量属性目标(DFX)测试结论

  ###  4.2.1 性能测试结论

  该特性无性能要求。


  ###  4.2.3 安全&隐私保护测试结论

  无

  ### 4.2.4 可服务性测试结论

  无

  ### 4.2.5 生命周期管理测试结论

  无

  ### 4.2.6 可靠性测试结论

  无

  ###  4.2.7 兼容性测试结论

  无

  ###  4.2.8 升级测试结论

  从无该特性版本升级至该特性所在版本，升级成功；升级后数据库，支持pagehack解析索引页面。

  ## 4.3 资料测试结论

  | 序号 | 测试章节                                                     | 测试结论 |
  | ---- | ------------------------------------------------------------ | -------- |
  | 1    | [离线页面解析工具——pagehack](https://docs.opengauss.org/zh/docs/latest/docs/ToolandCommandReference/pagehack.html) | 测试通过 |

  # 5 测试对象质量评估

  ##  5.1 覆盖率分析

  已覆盖pcr解析数据校验、RCR解析数据校验、测试pagehack工具解析索引页面工具使用，涉及参数校验，并覆盖普通ustore表、分区表、二级分区表及对应索引等。

  ##  5.2 缺陷统计和分析

  ###   5.2.1 缺陷统计

  |        | 问题总数 | 严重 | 主要 | 次要 | 不重要 |
  | ------ | -------- | ---- | ---- | ---- | ------ |
  | 数目   | 5        | 0    | 0    | 3    | 2      |
  | 百分比 | 100%     | 0%   | 0%   | 60%  | 40%    |

  ###   5.2.2 缺陷列表

  | 问题单号                                                     | 问题描述                                                     | 问题级别 | 当前状态 |
  | ------------------------------------------------------------ | ------------------------------------------------------------ | -------- | -------- |
  | [7062](https://gitcode.com/opengauss/openGauss-server/issues/7062) | [Bug]: 【测试类型：工具功能】【测试版本：7.0.0-RC2】pagehack解析索引结果中，ubtree flag同时显示BTP_INTERNA及BTP_ROOT | 次要     | 已验收   |
  | [7088](https://gitcode.com/opengauss/openGauss-server/issues/7088) | [Bug]: 【测试类型：工具功能】【测试版本：7.0.0-RC2】ubtree索引插入大量数据，pagehack解析索引结果中，含解析失败项 | 次要     | 已验收   |
  | [7102](https://gitcode.com/opengauss/openGauss-server/issues/7102) | [Bug]: 【测试类型：工具功能】【测试版本：7.0.0-RC2】pagehack解析前，应校验被解析文件及索引类型，是否支持及匹配 | 次要     | 已验收   |
  | [7089](https://gitcode.com/opengauss/openGauss-server/issues/7089) | [Bug]: 【测试类型：工具功能】【测试版本：7.0.0-RC2】rcr类型索引，pagehack解析索引结果末尾，不应含TD相关信息 | 不重要   | 已验收   |
  | [7061](https://gitcode.com/opengauss/openGauss-server/issues/7061) | [Bug]: 【测试类型：工具功能】【测试版本：7.0.0-RC2】pagehack指定ubtree_pcr_index解析rcr索引成功，且结果含TD行头 | 不重要   | 已验收   |
  | [6924](https://gitcode.com/opengauss/docs/issues/6924)       | [Bug]: 【测试类型：资料】【测试版本：latest】社区无pagehack解析ubtree索引参数相关资料 | 不重要   | 已验收   |

  # 6 测试过程评估

  ##  6.1 测试策略回顾

  | 编号 | 特性           | 验证策略                                                     | 是否按照测试策略执行 |
  | ---- | -------------- | ------------------------------------------------------------ | -------------------- |
  | 1    | ubtree索引增强 | 覆盖pcr解析数据校验、RCR解析数据校验、测试pagehack工具解析索引页面工具使用，涉及参数校验，并覆盖普通ustore表、分区表、二级分区表及对应索引等 | YES                  |

  ##  6.2 测试设计评估

  已评审并归档Testplan，归档地址详见附件

  ##  6.3 测试执行评估

  ###  6.3.1 测试执行统计数据

  | 版本名称                 | 工作量投入(人天) | 测试用例数 | 用例执行数 | 发现缺陷数 | 代码量 | 缺陷密度 |
  | ------------------------ | ---------------- | ---------- | ---------- | ---------- | ------ | -------- |
  | openGauss 7.0.0-RC2 B010 | 14               | 61         | 61         | 5          | 0.322  | 15.53    |

  本次测试共发现6个issue，其中1个资料单，均已修复并回归通过，缺陷密度为5/0.322k=15.53，整体质量良好。

  ###  6.3.2 测试用例执行结果统计数据

  | 总测试用例数 | 实际测试的用例数 | Passed | Failed | Blocked | Unavailable | 执行率 | 执行通过率 |
  | ------------ | ---------------- | ------ | ------ | ------- | ----------- | ------ | ---------- |
  | 61           | 61               | 45     | 16     | 0       | 0           | 100%   | 73.8%      |

  本次测试共输出测试用例61个，执行测试共1轮，发现6个issue，其中1个资料单，均已修复并回归通过，无遗留问题，整体质量良好。

  # 7 附件

  ##  7.1 附件1：遗留问题列表

  无

  ##  7.2 附件2：特性相关PR

  特性代码pr：

  https://gitcode.com/opengauss/openGauss-server/pull/7442

  资料pr：待补充

  测试设计：https://devcloud.cn-east-3.huaweicloud.com/testmind/project/03669bfd256c444bbfda6d7fb8b83bb2/testmind/mindmap?mindId=1fb95bfbee8041dc81208fc8c80e8729&hideDevcloudHead=true

  测试用例：testplan _ openGauss7.0.0 RC2_ 内核 _ Ubtree页面解析工具

  https://devcloud.cn-east-3.huaweicloud.com/cloudtestportal/project/03669bfd256c444bbfda6d7fb8b83bb2/testcase?branch_id=vb2100010cof2bn7
