![avatar](../../images/openGauss.png)

版权所有 © 2024  openGauss社区
 您对“本文档”的复制、使用、修改及分发受知识共享(Creative Commons)署名—相同方式共享4.0国际公共许可协议(以下简称“CC BY-SA 4.0”)的约束。为了方便用户理解，您可以通过访问[*https://creativecommons.org/licenses/by-sa/4.0/*](https://creativecommons.org/licenses/by-sa/4.0/) 了解CC BY-SA 4.0的概要 (但不是替代)。CC BY-SA 4.0的完整协议内容您可以访问如下网址获取：[*https://creativecommons.org/licenses/by-sa/4.0/legalcode*](https://creativecommons.org/licenses/by-sa/4.0/legalcode)。

修订记录

| 日期      | 修订版本 | 修改描述 | 作者   |
| --------- | -------- | -------- | ------ |
| 2025.2.28 | 1.0      |          | 姚雨驰 |

[TOC]

**Keywords 关键词**：录制回放工具/datakit

**Abstract 摘要**：本次测试主要覆盖录制回放工具继承到datakit后的功能测试、可用性测试、易用性测试、资料测试，测试质量良好

**缩略语清单： **

| 缩略语 | 英文全名 | 中文解释 |
| ------ | -------- | -------- |
|        |          |          |


# 1 概述

本次报告是录制回放工具集成到Datakit测试报告，主要测试版本为datakit 7.0.0-RC1 B015版本，录制回放工具7.0.0-RC1 B015版本

# 2 测试版本说明

## 2.1 测试版本信息

###   2.1.1 被测版本

| 版本名称       | 软件包名称               | 测试起始时间 | 测试结束时间 | 测试人员 |
| -------------- | ------------------------ | ------------ | ------------ | -------- |
| 7.0.0-RC1 B015 | Datakit-7.0.0-RC1.tar.gz | 2025.2.13    | 2025.2.27    | 姚雨驰   |

###  2.1.2 配套测试的版本



| 版本名称       | 配套版本                   | 版本说明 |
| -------------- | -------------------------- | -------- |
| 7.0.0-RC1 B015 | 7.0.0-RC1 B015录制回放工具 |          |

## 2.2 测试环境描述



###  2.2.1 环境硬件信息

| 环境信息 | 硬件型号                          | 硬件配置信息                                                 | 备注 |
| -------- | --------------------------------- | ------------------------------------------------------------ | ---- |
| 物理机   | openEuler release 20.03 (LTS-SP3) | CPU：Kunpeng-920<br />内存：893G<br />硬盘：3T<br />OS：openEuler_aarch64<br /> |      |

### 

### 2.2.3 OS版本

无

# 3 版本概要测试结论、关键风险和规避措施



## 3.1 测试结论总结

本次测试完成了功能测试、易用性测试、资料测试，发现问题15个，所有被测特性的测试用例的累计执行覆盖率达到100%，上述测试发现的问题，已验收13个，修复中2个，回归测试结果正常，需求开发质量良好

## 3.2 约束说明

使用录制回放工具前，需要使用全量迁移将源端和目标端的数据进行同步。否则会出现sql回放执行失败的情况

## 3.3 关键风险和规避措施

无

# 4 版本详细测试结论

## 4.1 特性测试结论

###   4.1.1 新需求质量评价

| 特性                      | 特性价值评估                                                 | 应用说明及关键约束假设依赖                                   | 关键遗留事项如缺陷等 | 测试整体覆盖情况 | 特性质量评估               | 主要风险 |
| ------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | -------------------- | ---------------- | -------------------------- | -------- |
| 录制回放工具集成到Datakit | 实现通过datakit便捷使用录制回放工具，并捕捉源端和目标端录制回放过程中sql执行速度进行对比。体现数据库性能优势 | 使用录制回放工具前，需要使用全量迁移将源端和目标端的数据进行同步 | 无                   | 功能全覆盖       | <font color=green>▮</font> | 无       |

## 4.2 产品质量属性目标(DFX)测试结论

###  4.2.1 性能测试结论

无

###  4.2.2 可靠性测试结论

| 测试步骤                                                     | 测试结果 |
| ------------------------------------------------------------ | -------- |
| 1.创建录制回放任务<br />2.启动任务<br />3.录制阶段使用sysbench的prepare命令拼接1000W条插入语句的sql，构造内存溢出的场景 | 合理报错 |
| 1.创建录制回放任务，开启资源监控功能<br />2.启动任务<br />3.注入cpu满载故障 | 合理报错 |
| 1.创建录制回放任务，开启资源监控功能<br />2.启动任务<br />3.注入网络故障 | 合理报错 |
| 1.创建录制回放任务，开启资源监控功能<br />2.启动任务<br />3.注入内存故障 | 合理报错 |
| 1.创建录制回放任务，开启资源监控功能<br />2.启动任务<br />3.注入磁盘故障 | 合理报错 |

###  4.2.3 安全&隐私保护测试结论

无

### 4.2.4 可服务性测试结论

无

### 4.2.5 生命周期管理测试结论

### 4.2.6 韧性测试结论

无

###  4.2.7 兼容性测试结论

无

###  4.2.8 升级测试结论

无

## 4.3 资料测试结论

| 序号 | 测试章节                                                     | 测试结论     |
| ---- | ------------------------------------------------------------ | ------------ |
|      | workbench仓：plugins/data-migration/doc/DataKit Product Manual - Data Migration .md | 整体质量良好 |
|      |                                                              |              |

# 5 测试对象质量评估

##  5.1 覆盖率分析

本次测试覆盖了页面易用性测试，录制回放工具全流程测试，前后端数据一致性测试，故障场景测试。

##  5.2 缺陷统计和分析

###   5.2.1 缺陷统计

|        | 问题总数 | 严重 | 主要 | 次要 | 不重要 |
| ------ | -------- | ---- | ---- | ---- | ------ |
| 数目   | 15       | 0    | 1    | 14   | 0      |
| 百分比 | 100%     | 0    | 7%   | 93%  | 0      |

###   5.2.2 缺陷列表

| 问题单号 | 问题描述                                                     | 问题级别 | 当前状态 |
| -------- | ------------------------------------------------------------ | -------- | -------- |
| IBNCHX   | 【测试类型：工具功能】【测试版本： datakit 7.0.0-RC1】录制回放工具解析时pacap卡住，无法回放 | 主要     | 已验收   |
| IBPM7Q   | 【测试类型：工具功能】【测试版本： datakit 7.0.0-RC1】录制回放工具执行仅回放任务时，不会生成parse-process.txt文件，导致进度不会刷新 | 次要     | 待办的   |
| IBOQ6S   | **【测试类型：工具功能】【测试版本：datakit 7.0.0-RC1】录制回放过程中，kill -9 后台进程，前端卡住无报错** | 次要     | 已验收   |
| IBOK33   | **【测试类型：工具功能】【测试版本： datakit 7.0.0-RC1】录制回放自定义参数设置系统内存、磁盘、CPU使用率阈值为0时，录制回放任务会卡住** | 次要     | 已验收   |
| IBO261   | **【测试类型：工具功能】【测试版本： datakit 7.0.0-RC1】仅录制任务执行完成后，已解析数据显示为0，后端未生成进度文件** | 次要     | 已验收   |
| IBNX8S   | **【测试类型：工具功能】【测试版本：datakit 7.0.0-RC1】录制回放详情页面无法展示回放中出现的慢sql** | 次要     | 已验收   |
| IBNX0P   | **【测试类型：工具功能】【测试版本：datakit 7.0.0-RC1】录制回放任务详情页面的刷新功能，刷新不了已解析和已回放的数据** | 次要     | 已验收   |
| IBNWRL   | **【测试类型：工具功能】【测试版本： datakit 7.0.0-RC1】录制回放工具录制和回放均已完成后，任务无法自动停止** | 次要     | 已验收   |
| IBNEUY   | **【测试类型：工具功能】【测试版本： datakit 7.0.0-RC1】录制回放工具易用性，需要优化** | 次要     | 已验收   |
| IBNDKQ   | **【测试类型：工具功能】【测试版本： datakit 7.0.0-RC1】录制回放工具日志，已解析数据和已回放数据不匹配** | 次要     | 已验收   |
| IBN5W3   | **【测试类型：工具功能】【测试版本：datakit 7.0.0-RC1】录制回放工具出现内存溢出问题时，前端未捕获异常并展示** | 次要     | 待回归   |
| IBN254   | **【测试类型：工具功能】【测试版本：datakit 7.0.0-RC1】创建录制回放任务时，点击删除第二行的映射关系，第一行的映射关系被删除** | 次要     | 已验收   |
| IBN1UO   | **【测试类型：工具功能】【测试版本： datakit 7.0.0-RC1】创建录制回放任务界面新增用户失败，接口调用错误** | 次要     | 已验收   |
| IBN15N   | **【测试类型：工具功能】【测试版本：datakit 7.0.0-RC1】录制回放工具不支持中英文转换** | 次要     | 已验收   |
| IBPM3R   | 【测试类型：工具功能】【测试版本：datakit 7.0.0-RC1】录制回放工具创建仅回放任务，后端配置文件有误 | 次要     | 修复中   |

# 6 测试过程评估

##  6.1 测试策略回顾

无

##  6.2 测试设计评估

无

##  6.3 测试执行评估

###  6.3.1 测试执行统计数据

| 版本名称       | 工作量投入(人天) | 测试用例数 | 用例执行数 | 发现缺陷数 | 代码量（KLOC） | 缺陷密度 |
| -------------- | ---------------- | ---------- | ---------- | ---------- | -------------- | -------- |
| 7.0.0-RC1 B015 | 13               | 40         | 40         | 15         | 9.365          | 1.6      |

###  6.3.2 测试用例执行结果统计数据

|        | 计划测试用例数 | 实际测试的用例数 | Passed | Failed | Blocked | Unavailable | 执行率 | 执行通过率 |
| ------ | -------------- | ---------------- | ------ | ------ | ------- | ----------- | ------ | ---------- |
| 第一轮 | 40             | 40               | 30     | 6      | 0       | 4           | 100%   | 75%        |

# 7 附件

##  7.1 附件1：遗留问题列表

无

##  7.2 附件2：特性相关PR

代码PR：

https://e.gitee.com/opengaussorg/repos/opengauss/openGauss-workbench/pulls/944

https://e.gitee.com/opengaussorg/repos/opengauss/openGauss-workbench/pulls/952

https://e.gitee.com/opengaussorg/repos/opengauss/openGauss-workbench/pulls/999

https://e.gitee.com/opengaussorg/repos/opengauss/compatibility-assessment/pulls/91

https://e.gitee.com/opengaussorg/repos/opengauss/openGauss-workbench/pulls/1019

https://e.gitee.com/opengaussorg/repos/opengauss/compatibility-assessment/pulls/97

https://e.gitee.com/opengaussorg/repos/opengauss/openGauss-workbench/pulls/1023

https://e.gitee.com/opengaussorg/repos/opengauss/openGauss-workbench/pulls/1022

https://e.gitee.com/opengaussorg/repos/opengauss/openGauss-workbench/pulls/1024

https://e.gitee.com/opengaussorg/repos/opengauss/openGauss-workbench/pulls/1030

测试设计：

[测试设计-TestPlan](https://devcloud.cn-east-3.huaweicloud.com/testmind/project/03669bfd256c444bbfda6d7fb8b83bb2/testmind/mindmap?mindId=a7265056049e4cb89879b7d92e4a03c0&hideDevcloudHead=true)

测试用例：

7.0.0-》工具链-》Datakit集成录制回放工具

[测试用例-TestPlan](https://devcloud.cn-east-3.huaweicloud.com/cloudtestportal/project/03669bfd256c444bbfda6d7fb8b83bb2/testcase?branch_id=vb100000vvqelovg)

