![avatar](../../../images/openGauss.png)

版权所有 © 2024  openGauss社区
 您对“本文档”的复制、使用、修改及分发受知识共享(Creative Commons)署名—相同方式共享4.0国际公共许可协议(以下简称“CC BY-SA 4.0”)的约束。为了方便用户理解，您可以通过访问[*https://creativecommons.org/licenses/by-sa/4.0/*](https://creativecommons.org/licenses/by-sa/4.0/) 了解CC BY-SA 4.0的概要 (但不是替代)。CC BY-SA 4.0的完整协议内容您可以访问如下网址获取：[*https://creativecommons.org/licenses/by-sa/4.0/legalcode*](https://creativecommons.org/licenses/by-sa/4.0/legalcode)。

修订记录

| 日期      | 修订版本 | 修改描述 | 作者         |
| --------- | -------- | -------- | ------------ |
| 2025.2.11 | V1.0     | 新建     | Feiling Peng |

[TOC]

**Keywords 关键词**：*XX*

**Abstract 摘要**：*给出本阶段的测试范围、结果、分析及质量评价，同时对测试活动进行回顾总结。*

**缩略语清单： **

| 缩略语 | 英文全名 | 中文解释 |
| ------ | -------- | -------- |
|        |          |          |

***


# 1 概述

*描述本报告是哪一个特性测试活动的总结，指明被测对象及其版本。*
本次测试对业务开发插件在2024年1230需求进行测试验证，其归属于openGauss 7.0.0 RC1版本。
业务开发此版本新增或变动的功能如下：

|特性| 功能                                          |
|---|---------------------------------------------|
|DataKit 业务开发-  SQL查询功能优化|1、结果页新增导出结果按钮<br>2、结果页新增文本框来展示当前执行的sql<br>3、在窗口模块新增设置“查询返回行数限制”和“分隔符设置”（全局配置、单独配置）|
|【国创】DataKit 业务开发权限特性增强|授权/撤销模式、函数/过程、表、视图、序列节权限<br>批量授权/撤销模式、函数/过程、表、视图、序列节权限|
|【国创】DataKit 业务开发-支持代码片段功能|1、支持sql编辑器的sql保存为代码片段、将代码片段导出到sql编辑器<br>2、可编辑/删除代码片段|

# 2 测试版本说明


## 2.1 测试版本信息

###   2.1.1 被测版本

| 版本名称      | 软件包名称                        | 测试起始时间    | 测试结束时间    | 测试人员 |
|-----------|------------------------------|-----------|-----------| -------- |
| 7.0.0 RC1 | webds-plugin-7.0.0-RC1-repackage.jar | 2024.12.3 | 2025.1.21 |   Feiling Peng    |

###  2.1.2 配套测试的版本

| 版本名称 | 配套版本       | 版本说明 |
| -------- | -------------- | -------- |
| XXX      | XX测试工具版本 |          |
| XXX      | XX测试工具版本 |          |

## 2.2 测试环境描述

###  2.2.1 环境硬件信息

| 环境信息  | 硬件型号            | 硬件配置信息                                                                                                                              | 备注 |
|-------|-----------------|-------------------------------------------------------------------------------------------------------------------------------------| ---- |
| 测试环境一 | Huawei 2288H V5 | CPU：Intel Xeon Processor (Cascadelake) CPU @ 2.00GHz 8核<br />内存：16GB<br />硬盘：150G<br />OS：CentOS Linux 7.6<br />文件系统：xfs<br />网卡：Huawei Technologies Co., Ltd. iBMA Virtual Network Adapter |      |
| 测试环境二 | Huawei TaiShan 200 (Model 2280)  | CPU：Kunpeng-920 8核<br />内存：16GB<br />硬盘：509G<br />OS：openEuler release 20.03 (LTS-SP4)<br />文件系统：ext4<br />网卡：Huawei Technologies Co., Ltd. iBMA Virtual Network Adapter  |      |

### 2.2.2 虚拟化平台

| 虚拟化平台 | 版本说明  |
| -------- |-------|
| virt-manger         | 2.1.0 |

### 2.2.3 OS版本

不涉及

# 3 版本概要测试结论、关键风险和规避措施

## 3.1 测试结论总结

业务开发7.0.0 RC1版本测试阶段完成了功能测试（30个新增用例）、接口测试（216个用例，包含继承特性的接口测试用例）；完成了硬件/升级兼容性测试；需求100%实现，所有新特性的测试用例的累计执行覆盖率达到100%。
上述测试发现13个问题，无遗留问题待处理。

## 3.2 约束说明

**函数/过程**

（1）在“**SQL** **终端**”或“**创建函数**/**过程**”向导创建的函数/过程须以“/”结尾，表示函数/过程的结尾。

**调试**

（1）安装openGauss3.1.0及以上

（2）安装 pldebugger 插件3.0及以上

（3）仅支持plpgsql语言的调试

（4）函数调试覆盖率功能需在openGauss5.1.0 b011及之后的版本下使用，产生记录需要设置数据库enable_proc_coverage参数为on：·ALTER DATABASE postgres set enable_proc_coverage to '
on';·

**项目运行**

（1）本项目依赖主平台的web-socket，若需要使用本项目所有功能，只能通过编译成 jar 包的形式作为插件运行在主平台上，若需单独运行将影响
SQL 终端语句执行、调试函数/过程等功能的使用。

（2）部署安装时需设置心跳时间小于平台token过期时间，
调整心跳方法：在`plugins/data-studio/web-ui/src/config/index.ts`修改配置心跳时间（单位：毫秒）

```javascript
// websocket心跳时间
export const wsHeartbeatTime = 1000 * 30;
// http心跳时间
export const httpHeartbeatTime = 1000 * 30;
```

（3）外表管理功能需要当前操作数据库为企业版，外部服务器创建需要当前操作用户具有管理权限。

## 3.3 关键风险和规避措施

| 风险类型                                                    | 风险描述                        | 风险影响     | 规避措施和计划 | 责任人 | 当前进展 |
| ----------------------------------------------------------- |-----------------------------|----------|---------|-----|------|
| 安全风险 | 暂未进行安全测试活动，只验证了连接时密码使用密文传输。 | 未知       | 暂无      | 彭斐灵 | 新建   |

*风险类型有：安全风险/兼容性风险/<br/>功能风险/性能风险/稳定性风险<br/>维护风险等*

# 4 版本详细测试结论

## 4.1 特性测试结论

###   4.1.1 新需求质量评价

| 特性    | 特性价值评估                         | 应用说明及关键约束假设依赖 | 关键遗留事项如缺陷等 | 测试整体覆盖情况 | 特性质量评估               | 主要风险               |
|-------|--------------------------------| -------------------------- | -------------------- | ---------------- | -------------------------- | ---------------------- |
|DataKit 业务开发-  SQL查询功能优化|特性优化，提高易用性，便于用户查看查询结果|无|无|100%|<font color=green>▮</font>||
|【国创】DataKit 业务开发权限特性增强|新增特性，将授权操作可视化，对降低用户使用数据库的门槛有一定帮助。|无|无|100%|<font color=green>▮</font>||
|【国创】DataKit 业务开发-支持代码片段功能|新增特性，提高易用性，便于用户使用时复用代码片段|无|无|100%|<font color=green>▮</font>||

*特性质量评估说明*：

<font color=red><font color=red>●</font></font>： *表示特性不稳定，风险高*

<font color=yellow><font color=yellow>▲</font></font>： *表示特性基本可用，遗留少量问题*

<font color=green>▮</font>： *表示特性质量良好*

## 4.2 产品质量属性目标(DFX)测试结论

###  4.2.1 性能测试结论

暂无

###  4.2.2 可靠性测试结论

不涉及

###  4.2.3 安全&隐私保护测试结论

不涉及

### 4.2.4 可服务性测试结论

不涉及

### 4.2.5 生命周期管理测试结论

不涉及

### 4.2.6 韧性测试结论

不涉及

###  4.2.7 兼容性测试结论

| 测试步骤   | 测试结果                                                                             |
|--------|----------------------------------------------------------------------------------|
| 硬件兼容   | 支持在鲲鹏服务器上部署、Huawei 2288H V5上部署                                                   |
| 操作系统兼容 | 支持在x86+CentOS，x86+openEuler 20.03 LTS上部署，支持在arm+CentOS，arm+openEuler 20.03 LTS上部署 |
| 数据库兼容  | 覆盖率功能仅在openGauss 6.0.0版本可用， 其他功能在openGauss 3.0.0、openGauss 5.0.1可用。|

###  4.2.8 升级测试结论

| 测试步骤                                                                                                                                         | 升级路径 | 测试结果                                 |
|----------------------------------------------------------------------------------------------------------------------------------------------| -------- |--------------------------------------|
| 将openGauss-datakit-6.0.0.jar升级为openGauss-datakit-7.0.0-RC1.jar，webds-plugin-6.0.0-repackage.jar升级为webds-plugin-7.0.0-RC1-repackage.jar后，重启服务 |          | 服务启动成功，插件加载成功，工具存储的旧数据在新版本可使用，原功能可用。 |

### 4.2.9 接口测试结论

| 接口数 | 用例数 | 接口通过率 |
|-----|-----|-------|
| 128  | 216 | 100%  |

## 4.3 资料测试结论

测试资料为用户操作手册，目前用户操作手册在社区代码仓对应插件目录的readme.md文档。当前插件地址为 openGauss-workbench/ plugins / data-studio。

| 序号 | 测试章节             | 测试结论 |
| ---- | -------------------- | -------- |
| 1    | 5.7.2 使用 SQL 查询  | 通过     |
| 2    | 5.7.7 代码片段       | 通过     |
| 3    | 5.16.3 授权/撤销权限 | 通过     |


# 5 测试对象质量评估

##  5.1 覆盖率分析

| 序号  |需求/特性|实现情况|覆盖测试情况|需求覆盖率| 代码覆盖情况 | 场景覆盖         |
|-----|---|---|---|---|--------|--------------|
| 1   |DataKit 业务开发-  SQL查询功能优化|均已实现|均已测试|100%|无| 无，此为界面优化     |
| 2   |【国创】DataKit 业务开发权限特性增强|均已实现|均已测试|100%|无| 无      |
| 3   |【国创】DataKit 业务开发-支持代码片段功能|均已实现|均已测试|100%|无| 无      |




##  5.2 缺陷统计和分析

###   5.2.1 缺陷统计

|        | 问题总数 | 严重  | 主要  | 次要  | 不重要 |
| ------ |------|-----|-----|-----|-----|
| 数目   | 13   | 0   | 6   | 1   | 6   |
| 百分比 | 100% | 0%  | 46% | 8%  | 46% |

###   5.2.2 缺陷列表

| 问题单号                                   | 问题描述           | 问题级别  | 当前状态      |
|----------------------------------------|----------------|-------|-----------|
| 1 | 函数过程授权_sql语法错误 |严重| 关闭    |
| 2 | 模式授权_回填后异常                             | 严重             | 关闭 |
| 3 | 连接数据库_当某一个接口数据异常时_整个数据库列表都无法渲染         | 提示             | 关闭  |
| 4 | 数据库断开连接后_修改数据库属性提示还有连接                 | 提示             | 关闭  |
| 5 | 数据导出为text_str类型未加引号导致导出的txt不能导入        | 严重             | 关闭  |
| 6 | 撤销权限_需修改为未选择权限时不可选择only grant privilege | 一般             | 关闭 |
| 7 | 搜索图标需添加点击事件                            | 提示             | 关闭  |
| 8 | 代码片段_导出到SQL终端                          | 提示             | 关闭  |
| 9 | 创建代码片段_保存失败                            | 严重             | 关闭 |
| 10 | 权限管理_撤销权限时勾选onlyGrantPrivilege的问题      | 严重             | 关闭 |
| 11 | SQL预览中SQL语句需换行显示                       | 提示             | 关闭  |
| 12 | 权限管理_SQL预览中授权对象为空                      | 严重             | 关闭 |
| 13 | 权限管理窗口标题显示不正确                          | 提示             | 关闭 |


# 6 测试过程评估

##  6.1 测试策略回顾

| 编号                       | 特性 | 验证策略                                                                                                                                                                                                                  | 是否按照测试策略执行 |
|--------------------------| ---- |-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------| -------------------- |
 |I99AKS|DataKit 业务开发-  SQL查询功能优化  |1. 验证SQL查询结果分页显示、返回行数限制。<br>2. 验证SQL查询结果导出。|是|
|I9BG8H|【国创】DataKit 业务开发权限特性增强    |1. 验证可批量对多个用户/角色进行多个对象的赋权或撤销权限。<br>2. 验证对象、用户/角色支持根据名称搜索<br>3. 验证操作日志显示、SQL预览、操作信息回填。|是|
| IB549K |【国创】DataKit 业务开发-支持代码片段功能 |1. 验证新建/编辑/删除代码片段<br>2. 验证代码片段列表<br>3. 验证导出代码片段到SQL终端<br>4. 验证复制代码片段<br>|是|

##  6.2 测试设计评估

| 编号 | 测试点修改说明 | 修改原因 | 是否影响测试质量 |
| ---- | -------------- | -------- | ---------------- |
|      |                |          |                  |
|      |                |          |                  |
|      |                |          |                  |

##  6.3 测试执行评估

###  6.3.1 测试执行统计数据

| 版本名称        | 工作量投入(人天) | 测试用例数 | 用例执行数 | 发现缺陷数 | 缺陷密度                                 |
| --------------- | ---------------- | ---------- | ---------- | ---------- | ---------------------------------------- |
| openGauss 7.0.0 | 11               | 30         | 30         | 13         | 总问题13/62kloc=0.4,遗留问题数0/62kloc=0 |

*数据项说明：*

- *版本名称--每个转测版本名称，例如openGauss 6.0.0 B016*
- *工作量投入--与本活动相关的所有工作量投入，包括测试计划、方案、用例、脚本、执行等所有与本测试相关的活动所花的投入，单位“人天”；不包括以前已经统计的投入，不包括开局、用户支援等非测试相关投入；*
- *测试用例数--到本测试活动结束时，本测试活动中所有可用测试用例数；*
- *执行用例数--在本测试活动中执行测试用例数，含手工和自动化用例，多次重复执行同一用例计算为1个；*
- *发现缺陷数--本测试活动总共发现的缺陷数（不含无效问题单数）。*
- *缺陷密度--缺陷个数/代码行数*

###  6.3.2 测试用例执行结果统计数据

当前版本新增/修改特性用例统计：

| 总测试用例数 | 实际测试的用例数 | Passed | Failed | Blocked | Unavailable | 执行率  | 执行通过率 |
|--------|----------|--------|--------|---------|-------------|------|-------|
| 30     | 30       | 30     | 0      | 0       | 0           | 100% | 100%  |


按特性统计：

|特性| 总测试用例数 | 实际测试的用例数 | Passed | Failed | Blocked | Unavailable | 执行率  | 执行通过率 |
|---|--------|----------|--------|--------|---------|-------------|------|-------|
| DataKit 业务开发-  SQL查询功能优化| 9      | 9        | 9      | 0      | 0       | 0           | 100% | 100%  |
|【国创】DataKit 业务开发权限特性增强| 11     | 11       | 11     | 0      | 0       | 0           | 100% | 100%  |
| 【国创】DataKit 业务开发-支持代码片段功能| 10     | 10       | 10     | 0      | 0       | 0           | 100% | 100%  |

*其中：*

*Passed 用例执行成功*

*Failed 用例全部或部分执行结果未通过或者测试执行过程中遇到其他与本用例无关的失效事件*

*Blocked由于产品本身的问题导致用例不可执行*

*Unavailable由于软件本身以外，如环境、工具、物料、时间、人力资源等因素导致用例未执行*

| 异常用例情况 | 影响分析 | 规避措施 | 后续计划 |
| ------------ | -------- | -------- | -------- |
|              |          |          |          |

# 7 附件

##  7.1 附件1：遗留问题列表

无

##  7.2 附件2：特性相关PR

1、【业务开发】SQL终端查询结果页优化以及实现数据库对象批量授权/撤销权限

https://gitee.com/opengauss/openGauss-workbench/pulls/942



2、【业务开发】实现“代码片段”功能

https://gitee.com/opengauss/openGauss-workbench/pulls/959



3、【业务开发】实现代码片段功能

https://gitee.com/opengauss/openGauss-workbench/pulls/976



4、【业务开发】修复业务开发缺陷

https://gitee.com/opengauss/openGauss-workbench/pulls/1011



5、更新业务开发操作手册

https://gitee.com/opengauss/openGauss-workbench/pulls/1012



6、【业务开发】新建连接增加重复连接提示 

https://gitee.com/opengauss/openGauss-workbench/pulls/1013



