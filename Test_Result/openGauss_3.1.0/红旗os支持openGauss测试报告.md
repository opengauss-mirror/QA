![avatar](../../images/openGauss.png)

版权所有 © 2022  openGauss社区
 您对“本文档”的复制、使用、修改及分发受知识共享(Creative Commons)署名—相同方式共享4.0国际公共许可协议(以下简称“CC BY-SA 4.0”)的约束。为了方便用户理解，您可以通过访问https://creativecommons.org/licenses/by-sa/4.0/ 了解CC BY-SA 4.0的概要 (但不是替代)。CC BY-SA 4.0的完整协议内容您可以访问如下网址获取：https://creativecommons.org/licenses/by-sa/4.0/legalcode。

修订记录

|   日期   | 修订版本 |           修改描述           |      作者       |
| :------: | :------: | :--------------------------: | :-------------: |
| 2022-6-6 |   1.0    |       特性测试报告初稿       | zou_jialiang050 |
| 2022-6-7 |   1.1    |         增加测试步骤         | zou_jialiang050 |
| 2022-6-9 |   1.2    | 增加缩略语及完善操作系统信息 | zou_jialiang050 |

 关键词： 编译、红旗os、系统兼容，编译安装

 

摘要：

本文对红旗os支持openGauss 3.1.0 版本特性测试，并给出最终测试结论。

缩略语清单：

| 缩略语 |           英文全名           | 中文解释                                                    |
| :----: | :--------------------------: | ----------------------------------------------------------- |
|  JDBC  |  Java Database Connectivity  | Java语言中用来规范客户端程序如何来访问数据库的应用程序接口  |
|  ODBC  |  Open Database Connectivity  | 应用程序编程接口方法来访问数据库管理系统（DBMS）的标准API   |
|  PDBC  | Python Database Connectivity | 使用Python编程接口方法来访问数据库管理系统（DBMS）的标准API |
|  GDBC  |   Go Database Connectivity   | 使用Go编程接口方法来访问数据库管理系统（DBMS）的标准API     |

# 1     特性概述

红旗os支持openGauss数据库编译、安装、驱动功能、数据库基本功能特性。

# 2     特性测试信息

|           版本名称            | 测试起始时间 | 测试结束时间 |
| :---------------------------: | :----------: | :----------: |
| openGauss3.0.0 build ae11cad2 |  2022-5-17   |   2022-6-2   |

|  硬件型号   |                         硬件配置信息                         | 备注 |
| :---------: | :----------------------------------------------------------: | ---- |
| x86+RedFlag | CPU：Inter Xeon Gold 6287C 8核<br />内存：1*32GB<br />硬盘：200G<br />OS：RedFlag Asianux 7 (Lotus) |      |
| ARM+Redlag  | CPU：kunpeng - 920 8核<br />内存：1*32GB<br />硬盘：200G<br />OS：Asianux Linux 7 (Core) |      |

os版本说明：

| 操作<br />系统 |          OS版本           |                           版本说明                           |
| :------------: | :-----------------------: | :----------------------------------------------------------: |
| RedFlag (X86)  | RedFlag Asianux 7 (Lotus) | RedFlag Asianux 7 (Lotus)，X86-64版本ISO<br />SHA256:bd060617fb02037c70ba9dc9fdcfbc3ad83eed8ba8d101274cd8f4416639aa6e |
| RedFlag (ARM)  |  Asianux Linux 7 (Core)   | Asianux Linux 7 (Core)，aarch版本ISO<br />SHA256:c20bd83100e92996dcd0f3d3dd394a502ec1814f6ce8473974250e828489078b |



# 3     测试结论概述

经测试，在X86及ARM的红旗os上，编译三方库、server、om、ODBC、JDBC、PDBC驱动通过，数据库安装及基本功能验证通过，ODBC、JDBC、PDBC、GDBC驱动功能验证通过，共执行测试用例34条，发现1个bug，现已修复且已验收通过。



## 3.1   测试整体结论

红旗os支持openGauss特性，共计执行用例34个，主要覆盖编译、驱动及基本功能测试，发现问题已解决，回归通过，无遗留风险，整体质量良好。

|   测试活动   | 活动评价 |
| :----------: | :------: |
|   编译测试   |   通过   |
| 安装部署测试 |   通过   |
|   驱动测试   |   通过   |
| 用例连跑测试 |   通过   |

## 3.2   约束说明

- 本报告中，使用的依赖为系统及软件包兼容依赖，对于依赖包错误有可能导致编译失败或报错。
- 本次测试是在固定的系统配置及软件版本等配套的前提下进行的，如果实际环境与本次测试存在不同，请自行评估差异。

## 3.3   遗留问题分析

### 3.3.1 遗留问题影响以及规避措施

| 问题单号 | 问题描述 | 问题级别 | 问题影响和规避措施 | 当前状态 |
| :------: | :------: | :------: | :----------------: | :------: |
|    NA    |          |          |                    |          |

### 3.3.2 问题统计

|             | 问题总数 | 严重 | 主要 | 次要 | 不重要 |
| :---------: | :------: | :--: | :--: | :--: | :----: |
|  数目 (个)  |    1     |  0   |  1   |  0   |   0    |
| 百分比  (%) |   100    |  0   | 100  |  0   |   0    |

### 3.3.3 问题详情

| 序号 |                           issue号                            | 问题级别 |                    问题简述                    | 问题状态 |
| :--: | :----------------------------------------------------------: | :------: | :--------------------------------------------: | :------: |
|  1   | [I57G1B](https://e.gitee.com/opengaussorg/issues/list?issue=I57G1B) |   主要   | dependency/fio/目录下build.py脚本混用tab和空格 |  已验收  |

# 4     测试执行

## 4.1   测试执行统计数据

### 4.1.1   三方库、server、om、JDBC、ODBC、PDBC驱动等编译测试

测试步骤：

（1）主备编译环境，安装X86及ARM环境相关依赖及软件包；<br />（2）下载三方库源码并按照官网文档进行三方库编译；<br />（3）下载server源码，按照官方文档进行server安装包的编译；<br />（4）下载om源码，按照官方文档进行om包的编译；<br />（5）下载python驱动源码，按照官方文档进行python驱动的编译；<br />（6）下载JDBC源码，按照官方文档进行JDBC驱动的编译；<br />（7）下载ODBC源码，按照官方文档进行ODBC驱动的编译。

测试结果：
（1）在X86及ARM环境中三方库、server及驱动等编译成功，共执行测试用例12条，发现1个bug，现已修复且验收通过。

###  4.1.2   数据库om安装、极简安装、编译安装测试

测试步骤：

（1）配置数据库xml文件及相关准备工作；<br />（2）使用编译好的server及om包按照官方文档进行om安装；<br />（3）使用server源码进行编译安装并配置环境变量及主备关系；<br />（4）解压编译完成的bz2包，运行极简安装脚本进行极简安装，并配置主备监听端口及主备关系。

测试结果：
（1）在X86及ARM环境中om安装、编译安装、极简安装单机及主备数据库成功，数据库状态正常，共执行测试用例12条，未发现bug。

###  4.1.3   JDBC、ODBC、PDBC、GDBC驱动测试

测试步骤：

（1）配置JDBC驱动路径及数据库用户并赋权，使用java脚本连接数据库进行操作观测结果；<br />（2）在环境中编译安装unixODBC后配置openGauss驱动程序及数据源，连接数据库执行命令观测结果；<br />（3）配置python驱动路径及环境变量，使用python脚本连接数据库并进行操作后观测结果；<br />（4）下载GDBC驱动源码，配置GDBC驱动脚本连接数据库执行操作并观测结果。

测试结果：
（1）在X86及ARM环境中JDBC、ODBC、python、GDBC驱动连接数据库成功，执行命令正常，共执行8条测试用例，未发现bug。

###  4.1.4   openGauss开源用例连跑测试

测试步骤：

（1）配置环境java11并下载Yat源码；<br />（2）om安装一主两备数据库主备连跑开源用例；<br />（3）编译安装Yat测试套件并配置数据库节点及各文件路径；<br />（4）连跑开源测试用例。

测试结果：
（1）在X86及ARM环境中数据库安装成功，执行开源用例32851条，连跑后经过分析未发现bug。

## 4.2   后续测试建议

无

# 5     附件

无