 ![avatar](../../../images/openGauss.png) 

版权所有 © 2022  openGauss社区
 您对“本文档”的复制、使用、修改及分发受知识共享(Creative Commons)署名—相同方式共享4.0国际公共许可协议(以下简称“CC BY-SA 4.0”)的约束。为了方便用户理解，您可以通过访问https://creativecommons.org/licenses/by-sa/4.0/ 了解CC BY-SA 4.0的概要 (但不是替代)。CC BY-SA 4.0的完整协议内容您可以访问如下网址获取：https://creativecommons.org/licenses/by-sa/4.0/legalcode。

修订记录

| 日期      | 修订版本 | 修改描述         | 作者            |
| :-------- | :------- | :--------------- | :-------------- |
| 2023-9-25 | 1.0      | 特性测试报告初稿 | zou_jialiang050 |
| 2023-9-25 | 2.0      | 增加后续测试建议 | zou_jialiang050 |

 关键词： 兼容性评估

摘要：

本文对实现datakit兼容性评估特性进行测试，并给出最终测试结论。

缩略语清单：

| 缩略语 | 英文全名 | 中文解释 |
| :----- | :------- | :------- |
| NA     |          |          |

# 1     特性概述

openGauss实现对mysqldump导出文件评估、用户自定义sql文件评估、jdbc连接mysql数据库语法及对象评估、mybatis映射文件评估、general_log、slow_log文件等内容进行兼容性评估。

# 2     特性测试信息

| 版本名称                      | 测试起始时间 | 测试结束时间 |
| :---------------------------- | :----------- | :----------- |
| M* 5.7                        | 2023-7-10    | 2023-7-15    |
| openGauss5.1.0 build d65e08d5 | 2023-7-24    | 2023-7-29    |
| openGauss5.1.0 build 31025cde | 2023-8-3     | 2023-8-6     |
| openGauss5.1.0 build 5762b67e | 2023-8-28    | 2023-8-30    |

| 环境信息 | 配置信息                                                     | 备注 |
| :------- | :----------------------------------------------------------- | :--- |
| 虚拟机   | CPU：Intel(R) Xeon(R) Gold 6278C CPU @ 2.60GHz 8核<br />内存：32GB<br />硬盘：100G<br />OS：CentOS Linux release 7.6.1908 (Core) |      |

# 3     测试结论概述

## 3.1   测试整体结论

实现兼容性语法评估特性测试中，共计执行用例46个，主要涉及mysqldump导出文件评估、用户自定义文件评估、jdbc连接mysql数据库语法及对象评估、mybatis映射文件评估、general_log、slow_log文件评估等，共发现7个问题，其中一个为文档单，现已全部回归通过，无遗留风险，对于实际使用中部分复杂场景可能会出现未知问题，整体质量一般。

| 测试活动 | 活动评价                     |
| :------- | :--------------------------- |
| 功能测试 | 兼容性语法评估功能验证，通过 |
| 资料测试 | 工具描述及使用资料验证，通过 |

## 3.2   约束说明

- 需在兼容B库下验证并已加载评估插件
- 评估存储过程、自定义函数等需使用delimiter将分隔符指定为//并在创建结束后使用delimiter将分隔符恢复为分号
- 输入自定义文件时，sql应以分号及回车进行分隔
- 自定义文件、general_log、slow_log、mybatis映射文件应手动指定.sql、.general、.slow、.xml后缀
- 输出文件只能指定.html格式，若不指定则默认输出至report.html中

## 3.3   遗留问题分析

### 3.3.1 遗留问题影响以及规避措施

| 问题单号 | 问题描述 | 问题级别 | 问题影响和规避措施 | 当前状态 |
| :------- | :------- | :------- | :----------------- | :------- |
| NA       |          |          |                    |          |

### 3.3.2 问题统计

|             | 问题总数 | 严重 | 主要 | 次要 | 不重要 |
| :---------- | :------- | :--- | :--- | :--- | :----- |
| 数目 (个)   | 7        | 0    | 1    | 6    | 0      |
| 百分比  (%) | 100      | 0    | 14   | 86   | 0      |

### 3.3.3 问题单汇总

| 序号 | issue号                                                      | 问题级别 | 问题简述                                                     | 问题状态 |
| :--- | :----------------------------------------------------------- | :------- | :----------------------------------------------------------- | :------- |
| 1    | [I7OHPR](https://gitee.com/opengauss/compatibility-assessment/issues/I7OHPR) | 主要     | 【测试类型：工具功能】【测试版本：5.1.0】兼容性评估工具评估文件报错 | 已验收   |
| 2    | [I7OZBN](https://gitee.com/opengauss/compatibility-assessment/issues/I7OZBN) | 次要     | 【测试类型：资料】【测试版本：5.1.0】文档中缺少安装部署、使用示例等 | 已验收   |
| 3    | [I7PL9I](https://gitee.com/opengauss/compatibility-assessment/issues/I7PL9I) | 次要     | 【测试类型：工具功能】【测试版本：5.1.0】兼容性评估结果错误，提示不支持评估 | 已验收   |
| 4    | [I7Q9HH](https://gitee.com/opengauss/compatibility-assessment/issues/I7Q9HH) | 次要     | 【测试类型：工具功能】【测试版本：5.1.0】兼容性评估DELIMITER识别错误 | 已验收   |
| 5    | [I7QGG7](https://gitee.com/opengauss/compatibility-assessment/issues/I7QGG7) | 次要     | 【测试类型：工具功能】【测试版本：5.1.0】 兼容性评估语句返回结果错误 | 已验收   |
| 6    | [I7QNZ9](https://gitee.com/opengauss/compatibility-assessment/issues/I7QNZ9) | 次要     | 【测试类型：工具功能】【测试版本：5.1.0】 兼容性评估空xml文件卡住及报错信息处理 | 已验收   |
| 7    | [I7TW6S](https://gitee.com/opengauss/compatibility-assessment/issues/I7TW6S) | 次要     | 【测试类型：工具功能】【测试版本：5.1.0】兼容性评估报错信息优化 | 已验收   |

#      测试执行

## 4.1   功能测试

| 测试步骤                                                     | 测试结果                                               |
| ------------------------------------------------------------ | ------------------------------------------------------ |
| 1.主要涉及mysqldump导出文件评估、用户自定义文件评估、jdbc连接mysql数据库语法及对象评估、mybatis映射文件评估、general_log、slow_log文件评估等 | 共执行测试用例46条<br />发现6个bug，现已全部回归通过。 |

## 4.2   资料测试

| 测试步骤                         | 测试结果                       |
| :------------------------------- | :----------------------------- |
| 1.验证工具安装及使用说明否正确。 | 发现1个bug，现已全部回归通过。 |

## 4.3   测试执行统计数据

| 版本名称                      | 测试用例数 | 用例执行结果             | 发现问题单数 |
| :---------------------------- | :--------- | :----------------------- | :----------- |
| openGauss5.1.0 build d65e08d5 | 18         | Passed:0<br />Failed:18  | 1            |
| openGauss5.1.0 build 31025cde | 46         | Passed:46<br />Failed:10 | 6            |
| openGauss5.1.0 build 5762b67e | 10         | Passed:10<br />Failed:0  | 0            |

缺陷单共7个，其中1个为文档单，修改代码量为4.76kloc， 缺陷密度为1.26个/kloc

## 4.4   后续测试建议

验证高复杂度文件目录执行评估结果

# 5     附件

无