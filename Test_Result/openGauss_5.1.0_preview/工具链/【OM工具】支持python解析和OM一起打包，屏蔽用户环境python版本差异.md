![avatar](D:\优化测试报告结构\QA_5.0.0\images\openGauss.png)

版权所有 © 2023  openGauss社区
 您对“本文档”的复制、使用、修改及分发受知识共享(Creative Commons)署名—相同方式共享4.0国际公共许可协议(以下简称“CC BY-SA 4.0”)的约束。为了方便用户理解，您可以通过访问https://creativecommons.org/licenses/by-sa/4.0/ 了解CC BY-SA 4.0的概要 (但不是替代)。CC BY-SA 4.0的完整协议内容您可以访问如下网址获取：https://creativecommons.org/licenses/by-sa/4.0/legalcode。

修订记录

| 日期       | 修订   版本 | 修改描述     | 作者        |
| :--------- | ----------- | ------------ | ----------- |
| 2023-06-14 | 1.0         | 特性测试报告 | houshaolong |

 关键词： 

Python版本解析、OM屏蔽

 摘要：

通过将不同Python版本便hi的动态库合入三方库install_tools目录中，并重新组织三方库中install_tools目录结构，在om加载动态库时根据系统的Python版本去对应的目录下寻找，用户无需改变自己环境Python版本，从而保证用户使用方式不变。主要解决当前环境下的Python版本必须与编译三方库使用的Python版本一致的问题。

缩略语清单：

| 缩略语 | 英文全名 | 中文解释 |
| ------ | -------- | -------- |
| N/A    |          |          |

# 1     特性概述

1. 支持Python解析器和OM统一编译打包，屏蔽用户环境的Python版本差异

# 2     特性测试信息

被测对象的版本信息：

| 版本名称                       | 测试起始时间 | 测试结束时间 |
| ------------------------------ | :----------- | ------------ |
| openGauss 5.0.0 build 12c545f1 | 2023-4-13    | 2023-4-23    |
| openGauss 5.0.0 build a7dd4e85 | 2023-4-24    | 2023-5-24    |
| openGauss 5.0.0 build 9e183978 | 2023-5-25    | 2023-5-31    |
| openGauss 5.0.0 build 584be3be | 2023-6-01    | 2023-6-08    |

环境信息：

| 硬件型号 | 配置信息                                                     | 备注 |
| -------- | ------------------------------------------------------------ | ---- |
| 虚拟机   | CPU：Intel(R) Xeon(R) Gold 6278C CPU @ 2.60GHz<br>内存：16GB<br/>硬盘：64GB<br/>OS：CentOS Linux release 7.6.1810 (Core) |      |
| 虚拟机   | CPU：Intel(R) Xeon(R) Gold 6278C CPU @ 2.60GHz<br/>内存：16GB<br/>硬盘：64GB<br/>OS：openEuler release 22.03_aarch64 |      |
| 虚拟机   | CPU：Intel(R) Xeon(R) Gold 6278C CPU @ 2.60GHz<br/>内存：16GB<br/>硬盘：64GB<br/>OS：openEuler release 20.03_aarch64 |      |
| 虚拟机   | CPU：Intel(R) Xeon(R) Gold 6266C CPU @ 2.60GHz<br/>内存：16GB<br/>硬盘：64GB<br/>OS：openEuler release 20.03(LTS-SP1)_x86_64 |      |
| 虚拟机   | CPU：Intel(R) Xeon(R) Gold 6266C CPU @ 2.60GHz<br/>内存：16GB<br/>硬盘：64GB<br/>OS：openEuler release 20.03(LTS-SP1)_x86_64 |      |

# 3     测试结论概述

## 3.1   测试整体结论

【om工具】支持Python解析和om一起打包，屏蔽用户环境版本差异，共计执行测试用例29个，分别覆盖x86_CentOS 7.6、ARM_openEuler_20.03、ARM_openEuler_22.03，x86_openEuler_20.03、和x86_openEuler_22.03等系统，提交问题单3个，且问题均已回归通过，无遗留风险，整体质量良好。

| 测试活动 | 活动评价                                                     |
| -------- | ------------------------------------------------------------ |
| 功能测试 | 不同python版本，安装数据库，测试通过                         |
| 兼容性测 | x86_CentOS 7.6、ARM_openEuler_20.03、ARM_openEuler_22.03，x86_openEuler_20.03、和x86_openEuler_22.03等系统，测试通过 |
| 资料测试 | 资料描述准确，示例完整，可正确操作，格式正确，测试通过       |

## 3.2   约束说明

1.环境上Python版本须为3.6及其以上版本

## 3.3   遗留问题分析

### 3.3.1  遗留问题影响以及规避措施

| 问题单号 | 问题描述 | 问题级别 | 问题影响和规避措施 | 当前状态 |
| -------- | -------- | -------- | ------------------ | -------- |
| N/A      |          |          |                    |          |

### 3.3.2  问题统计

|        | 问题总数 | 严重 | 主要 | 次要 | 不重要 |
| ------ | -------- | ---- | ---- | ---- | ------ |
| 数目   | 3        | 0    | 1    | 2    | 0      |
| 百分比 | 100%     | 0%   | 33%  | 67%  | 0%     |

### 3.3.3  问题单汇总

| 序号 | issue号                                                      | 问题级别 | 问题简述                                                     | 问题状态 |
| ---- | ------------------------------------------------------------ | :------- | :----------------------------------------------------------- | -------- |
| 1    | [I6W9B4](https://e.gitee.com/opengaussorg/issues/table?issue=I6W9B4) | 主要     | 编译安装python3.9，加参数--unused-third-party执行预安装，预安装失败 | 已验收   |
| 2    | [I6ZCZM](https://e.gitee.com/opengaussorg/issues/table?issue=I6ZCZM) | 次要     | 系统自带python3.7，预安装时加参数--unused-third-party，安装数据库时报错 | 已验收   |
| 3    | [I78J3U](https://e.gitee.com/opengaussorg/issues/table?issue=I78J3U) | 次要     | 安装指南-企业版安装-安装准备-准备软硬件安装环境，软件环境要求部分，对python的描述需要细化 | 已验收   |



# 4     测试执行

### 4.1.1分别编译不同版本python执行数据库安装

| 测试步骤                                              | 测试结果                           |
| ----------------------------------------------------- | ---------------------------------- |
| 1.环境编译安装不同版本Python及其依赖<br/>2.安装数据库 | 执行用例29条，发现bug2个，验收通过 |

### 4.1.6  兼容性测试

| 测试步骤                                                     | 测试结果                          |
| ------------------------------------------------------------ | --------------------------------- |
| 1.在X86_Centos 7.6上编译安装不同版本Python并安装数据库<br/>2.在X86_openEuler 20.03上编译安装不同版本Python并安装数据库<br/>3.在X86_openEuler 22.03上编译安装不同版本Python并安装数据库<br/>4.在ARM_openEuler 20.03上编译安装不同版本Python并安装数据库<br/>5.在ARM_openEuler 22.03上编译安装不同版本Python并安装数据库 | 执行29条用例，未发现bug，验收通过 |

### 4.1.8  资料测试

| 测试步骤                                 | 测试结果                           |
| ---------------------------------------- | ---------------------------------- |
| 1.检查资料是否描述准确，示例是否清晰完整 | 执行1条用例，发现bug 1个，验收通过 |

### 4.1.9  后续测试建议

无

## 4.2   测试执行统计数据

| 版本名称                       | 测试用例数 | 用例执行结果                | 发现问题单数 |
| ------------------------------ | ---------- | --------------------------- | ------------ |
| openGauss 5.0.0 build 12c545f1 | 16         | Passed：  15<br />Failed：1 | 1            |
| openGauss 5.0.0 build a7dd4e85 | 29         | Passed： 28 <br />Failed：1 | 1            |
| openGauss 5.0.0 build 9e183978 | 29         | Passed：29<br />Failed：0   | 0            |
| openGauss 5.0.0 build 584be3be | 29         | Passed：29<br />Failed：0   | 0            |

*数据项说明：*

* 累计发现缺陷单3个，其中1个为其他需求影响，3个缺陷均已解决且回归通过
* 失败用例已在后续问题修复后，回归issue执行通过
* 缺陷密度：1(缺陷个数)/0.361kloc(代码行数)=2.77(个/kloc)

# 5     附件

无
