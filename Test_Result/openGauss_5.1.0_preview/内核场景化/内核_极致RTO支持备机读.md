![avatar](../../../images/openGauss.png)

版权所有 © 2022  openGauss社区
 您对“本文档”的复制、使用、修改及分发受知识共享(Creative Commons)署名—相同方式共享4.0国际公共许可协议(以下简称“CC BY-SA 4.0”)的约束。为了方便用户理解，您可以通过访问https://creativecommons.org/licenses/by-sa/4.0/ 了解CC BY-SA 4.0的概要 (但不是替代)。CC BY-SA 4.0的完整协议内容您可以访问如下网址获取：https://creativecommons.org/licenses/by-sa/4.0/legalcode。

修订记录

|   日期    | 修订版本 |               修改描述               |      作者       |
| :------- | :------ | :---------------------------------- | :------------- |
| 2023-9-20 |   1.0    |           特性测试报告初稿           | liumin30023837 |

 关键词： 极致RTO 备机读

摘要：

本文对极致RTO支持备机读相关特性测试，并给出最终测试结论。

缩略语清单：

| 缩略语 |                       英文全名                        | 中文解释                                             |
| :---- | :--------------------------------------------------- | :---------------------------------------------------- |
|  NA  |  |          |

# 1     特性概述

openGauss实现极致RTO支持备机读相关特性测试

# 2     特性测试信息

| 版本名称                                                     | 测试起始时间 | 测试结束时间 |
| :----------------------------------------------------------- | :----------- | :----------- |
| openGauss 5.1.0 build 321133e2<br />openGauss 5.1.0 build 3455dcf7<br />openGauss 5.1.0 build 4e532edf<br />openGauss 3.0.5 build 5564ce8e | 2023-9-14    | 2023-9-25    |

| 环境信息 | 配置信息                                                     | 备注 |
| :------- | :----------------------------------------------------------- | :---- |
| 虚拟机   | CPU：Intel(R) Xeon(R) Gold 6161 CPU @ 2.20GHz 8核<br />内存：32GB<br />硬盘：200G<br />OS： openEuler 20.03 (LTS) |      |

# 3     测试结论概述

## 3.1   测试整体结论

实现极致RTO支持备机读特性测试中，主要涉及功能验证、文档验证，一致性测试共发现4个问题，现回归通过，无遗留风险，质量良好。</u>

| 测试活动 | 活动评价                                                     |
| :------ | :----------------------------------------------------------- |
| 功能测试 | 验证极致RTO支持备机读通过 |
| 一致性 | 跑tpcc 业务，验证一致性，通过 |
| 资料测试 | 新增功能和参数说明验证，通过 |

## 3.2   约束说明

- 无

## 3.3   遗留问题分析

### 3.3.1 遗留问题影响以及规避措施

| 问题单号 | 问题描述 | 问题级别 | 问题影响和规避措施 | 当前状态 |
| :------ | :------ | :------ | :---------------- | :------ |
|    NA    |  |          |  |  |

### 3.3.2 问题统计

|             | 问题总数 | 严重 | 主要 | 次要 | 不重要 |
| :--------- | :------ | :-- | :-- | :-- | :---- |
|  数目 (个)  |    4    |  0  |  4  |  0  |   0    |
| 百分比  (%) |   100   |  0  |  100  |  0  |   0    |

### 3.3.3 问题单汇总

| 序号 |                           issue号                            | 问题级别 |                           问题简述                           | 问题状态 |
| :-- | :---------------------------------------------------------- | :------ | :---------------------------------------------------------- | :------ |
| 1 | https://e.gitee.com/opengaussorg/issues/table?issue=I82P4E | 主要 | 【测试类型：功能测试】【测试版本：5.1.0】【需求名称：极致RTO支持备机可读】备机tpcc查询报错 | 已验收 |
| 2 | https://e.gitee.com/opengaussorg/issues/table?issue=I82Q1H | 主要 | 【测试类型：功能测试】【测试版本：5.1.0】【需求名称：极致RTO支持备机可读】备机读相关GUC参数设置异常 | 已验收 |
| 3 | https://e.gitee.com/opengaussorg/issues/table?issue=I83KZ2 | 主要 | 【测试类型：功能测试】【测试版本：5.1.0】【需求名称：极致RTO支持备机可读】备机读相关GUC参数按照资料设置失败 | 已验收 |
| 4 | https://e.gitee.com/opengaussorg/issues/table?issue=I83R1H | 主要 | 【测试类型：功能测试】【测试版本：5.1.0】【需求名称：极致RTO支持备机可读】开启极致RTO备机读 跑tpcc 备机查询报错lock BufferContentLock is not held | 已验收 |

# 4     测试执行

## 4.1   功能测试

| 测试步骤                                                     | 测试结果 |
| ------------------------------------------------------------ | -------- |
| 一、极致RTO支持备机读<br />1.GUC参数默认值、各参数值、边界值、设置方式验证<br />2.GUC系统函数gs_hot_standby_space_info验证 <br />3.开启极致RTO和备机读功能验证 跑tpcc业务 <br />4.开启极致RTO和备机读 跑tpcc业务业务正常运行,验证数据一致性 | 发现5bug |

## 4.2   资料测试

| 测试步骤                           | 测试结果   |
| :--------------------------------- | :--------- |
| 1.验证语法资料描述及示例是否正确。 | 发现0个bug |

## 4.3   测试执行统计数据

缺陷单共4个

## 4.4   后续测试建议

无

# 5     附件

```sql
无
```